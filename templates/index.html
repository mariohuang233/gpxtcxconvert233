<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="pageTitle">🥷秘术 - GPX 转 TCX 转换器 - 专业运动数据转换工具</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- Leaflet地图库 -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🏃</text></svg>">
    <!-- 高级动画脚本 -->
    <script src="{{ url_for('static', filename='script.js') }}" defer></script>
    <!-- 埋点统计脚本 -->
    <script src="{{ url_for('static', filename='analytics.js') }}" defer></script>
</head>
<body>
    <!-- 跳转到主内容的链接，提升可访问性 -->
    <a href="#main-content" class="skip-link" aria-label="跳转到主内容">跳转到主内容</a>
    
    <!-- 右上角语言选择器 -->
    <nav class="language-selector-top-right" role="navigation" aria-label="语言选择">
        <label for="languageSelector" class="sr-only">选择语言</label>
        <select id="languageSelector" class="language-selector" onchange="switchLanguage(this.value)" aria-label="选择界面语言">
            <option value="zh">中文</option>
            <option value="zh-tw">繁體中文</option>
            <option value="en">English</option>
            <option value="ja">日本語</option>
            <option value="ko">한국어</option>
            <option value="fr">Français</option>
            <option value="de">Deutsch</option>
            <option value="es">Español</option>
            <option value="pt">Português</option>
            <option value="it">Italiano</option>
            <option value="ar">العربية</option>
            <option value="ru">Русский</option>
        </select>
    </nav>
    
    <div class="container">
        <!-- 全屏居中欢迎区域 -->
        <header class="welcome-section animate-fade-in" role="banner">
            <h1 class="welcome-title animate-scale-in" data-translate="welcomeTitle">Run beyond imagination</h1>
            <p class="welcome-subtitle animate-fade-in animate-delay-2" data-translate="welcomeSubtitle">Transform your journey into endless possibilities</p>
            
            <div class="welcome-info animate-slide-up animate-delay-3">
                <div class="info-item">
                    <span class="info-label" data-translate="format">格式</span>
                    <span class="info-value">GPX → TCX</span>
                </div>
                <div class="info-item" id="developerInfo" style="cursor: pointer;" title="点击5次查看统计">
                    <span class="info-label" data-translate="developer">开发者</span>
                    <span class="info-value">mariohuang</span>
                </div>
                <div class="info-item" id="weatherInline" style="display: none;">
                    <span class="info-label" data-translate="weather">天气:</span>
                    <span class="info-value" id="weatherSummary">--</span>
                    <button class="location-toggle" id="locationToggle" onclick="refreshLocationAndWeather()" title="刷新定位和天气信息">
                        <span id="locationIcon">🔄</span>
                    </button>
                </div>
            </div>
            
            <div class="status-indicator status-warning animate-scale-in animate-delay-3" style="margin-top: 1.5rem;">
                ⚠️ 仅供测试使用
            </div>
            
            <div id="greetingError" class="status-indicator status-error" style="display: none;"></div>
            
            <!-- 过渡连接层 -->
            <div class="transition-bridge"></div>
            <!-- 连接桥梁 -->
            <div class="connection-bridge"></div>
        </header>

        <main id="main-content" role="main">
            <div class="status-indicator status-error" id="errorMessage" style="display: none;" role="alert" aria-live="polite"></div>

            <section class="upload-section animate-slide-up animate-delay-4" aria-labelledby="upload-heading">

            <div class="file-upload" id="fileUpload" role="button" tabindex="0" aria-label="点击或拖拽上传GPX文件" aria-describedby="upload-hint">
                <div class="upload-icon" aria-hidden="true">⚡</div>
                <div class="upload-text" id="upload-heading">Drop your GPX file</div>
                <div class="upload-hint" id="upload-hint">Seamless conversion • Instant results • Professional grade</div>
                <input type="file" id="fileInput" accept=".gpx" style="display: none;" aria-label="选择GPX文件" />
            </div>
            
            <!-- GPX路径可视化区域 -->
            <div class="gpx-preview" id="gpxPreview" style="display: none;">
                <div class="preview-header">
                    <h4 data-translate="routePreview">🗺️ 路径预览</h4>
                    <div class="route-stats" id="routeStats"></div>
                </div>
                <div class="map-container">
                    <div id="gpxMap" class="gpx-map"></div>
                </div>
                    <div class="route-info" id="routeInfo"></div>
                </div>
        </div>

            <section class="config-section animate-fade-in animate-delay-2" aria-labelledby="config-heading">
                <h2 id="config-heading" class="sr-only">转换配置设置</h2>
                <form id="configForm" role="form" aria-label="GPX转TCX转换配置">
                    <div class="config-grid">
                        <!-- 核心配置组 - 最重要的设置 -->
                        <fieldset class="card config-group config-primary animate-scale-in animate-delay-3">
                            <legend data-translate="sportConfig">🏃‍♂️ 基础设置</legend>
                            <div class="form-group" style="display: none;">
                                <label for="activityType" data-translate="activityType">运动类型</label>
                                <select id="activityType" name="activity_type">
                                    <option value="Running" data-translate="running">跑步 (通用)</option>
                                    <option value="Running_Street" data-translate="runningStreet">路跑</option>
                                    <option value="Running_Trail" data-translate="runningTrail">越野跑</option>
                                    <option value="Running_Track" data-translate="runningTrack">田径跑道</option>
                                    <option value="Running_Treadmill" data-translate="runningTreadmill">跑步机</option>
                                    <option value="Running_Indoor" data-translate="runningIndoor">室内跑步</option>
                                    <option value="Cycling" data-translate="cycling">骑行</option>
                                    <option value="Walking" data-translate="walking">步行</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="targetPace" data-translate="targetPace">目标配速</label>
                                <input type="text" id="targetPace" name="target_pace" value="5:30" placeholder="5:30">
                            </div>
                            <div class="form-group">
                                <label for="weight" data-translate="weight">体重 (kg)</label>
                                <div class="number-input-container">
                                    <div class="number-btn decrease" onclick="adjustNumber('weight', -1)">−</div>
                                    <input type="number" id="weight" name="weight" value="70" min="30" max="200">
                                    <div class="number-btn increase" onclick="adjustNumber('weight', 1)">+</div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="caloriesPerKm" data-translate="caloriesPerKm">每公里卡路里</label>
                                <div class="number-input-container">
                                    <div class="number-btn decrease" onclick="adjustNumber('caloriesPerKm', -5)">−</div>
                                    <input type="number" id="caloriesPerKm" name="calories_per_km" value="60" min="30" max="150">
                                    <div class="number-btn increase" onclick="adjustNumber('caloriesPerKm', 5)">+</div>
                                </div>
                            </div>
                        </fieldset>

                    <fieldset class="card config-group config-primary animate-scale-in animate-delay-4">
                        <legend data-translate="heartRate">💓 心率与时间</legend>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="baseHr" data-translate="baseHr">基础心率</label>
                                <div class="number-input-container">
                                    <div class="number-btn decrease" onclick="adjustNumber('baseHr', -5)">−</div>
                                    <input type="number" id="baseHr" name="base_hr" value="135" min="60" max="200">
                                    <div class="number-btn increase" onclick="adjustNumber('baseHr', 5)">+</div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="maxHr" data-translate="maxHr">最大心率</label>
                                <div class="number-input-container">
                                    <div class="number-btn decrease" onclick="adjustNumber('maxHr', -5)">−</div>
                                    <input type="number" id="maxHr" name="max_hr" value="165" min="100" max="220">
                                    <div class="number-btn increase" onclick="adjustNumber('maxHr', 5)">+</div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="startTime" data-translate="startTime">自定义开始时间</label>
                            <input type="datetime-local" id="startTime" name="start_time">
                        </div>
                    </fieldset>

                    <!-- 高级设置组 - 专业用户配置 -->
                    <fieldset class="card config-group config-secondary animate-scale-in animate-delay-5">
                        <legend data-translate="cadenceConfig">🦵 步频与功率</legend>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="baseCadenceDisplay" data-translate="baseCadence">基础步频</label>
                                <div class="number-input-container">
                                    <div class="number-btn decrease" onclick="adjustCadence('baseCadenceDisplay', -5)">−</div>
                                    <input type="number" id="baseCadenceDisplay" value="100" min="60" max="200" onchange="updateCadenceValue('base')">
                                    <div class="number-btn increase" onclick="adjustCadence('baseCadenceDisplay', 5)">+</div>
                                </div>
                                <input type="hidden" id="baseCadence" name="base_cadence" value="50">
                            </div>
                            <div class="form-group">
                                <label for="maxCadenceDisplay" data-translate="maxCadence">最大步频</label>
                                <div class="number-input-container">
                                    <div class="number-btn decrease" onclick="adjustCadence('maxCadenceDisplay', -5)">−</div>
                                    <input type="number" id="maxCadenceDisplay" value="140" min="100" max="240" onchange="updateCadenceValue('max')">
                                    <div class="number-btn increase" onclick="adjustCadence('maxCadenceDisplay', 5)">+</div>
                                </div>
                                <input type="hidden" id="maxCadence" name="max_cadence" value="70">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="basePower" data-translate="basePower">基础功率</label>
                                <div class="number-input-container">
                                    <div class="number-btn decrease" onclick="adjustNumber('basePower', -10)">−</div>
                                    <input type="number" id="basePower" name="base_power" value="150" min="50" max="500">
                                    <div class="number-btn increase" onclick="adjustNumber('basePower', 10)">+</div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="maxPower" data-translate="maxPower">最大功率</label>
                                <div class="number-input-container">
                                    <div class="number-btn decrease" onclick="adjustNumber('maxPower', -10)">−</div>
                                    <input type="number" id="maxPower" name="max_power" value="300" min="100" max="800">
                                    <div class="number-btn increase" onclick="adjustNumber('maxPower', 10)">+</div>
                                </div>
                            </div>
                        </div>
                    </fieldset>

                    <!-- 设备信息组 - 系统配置 -->
                    <fieldset class="card config-group config-secondary animate-scale-in animate-delay-6">
                        <legend data-translate="deviceInfo">📱 设备与格式</legend>
                        <div class="form-group">
                            <label data-translate="deviceName">设备名称</label>
                            <input type="text" value="Forerunner 570" disabled style="background: rgba(255,255,255,0.05); color: #999; border-color: rgba(255,255,255,0.05);">
                            <input type="hidden" name="device_name" value="Forerunner 570">
                        </div>
                        <div class="form-group">
                            <label data-translate="deviceVersion">固件版本</label>
                            <input type="text" value="12.70" disabled style="background: rgba(255,255,255,0.05); color: #999; border-color: rgba(255,255,255,0.05);">
                            <input type="hidden" name="device_version" value="12.70">
                        </div>
                        <div class="form-group">
                            <label data-translate="format">转换格式</label>
                            <input type="text" value="GPX → TCX" disabled style="background: rgba(255,255,255,0.05); color: #999; border-color: rgba(255,255,255,0.05);">
                        </div>
                    </fieldset>
                </div>
                </div>
            </form>
        </div>

        <div class="convert-section animate-fade-in animate-delay-9">
            <button id="convertBtn" class="btn btn-primary" disabled>
                <span class="btn-icon">⚡</span>
                <span class="btn-text" data-translate="convertBtn">开始转换</span>
                <div class="btn-ripple"></div>
            </button>
        </div>

        <div class="progress-section" id="progressSection" style="display: none;">
            <div class="card">
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-text" id="progressText" data-translate="initializing">正在初始化...</div>
                </div>
            </div>
        </div>

        <div class="result-section" id="resultSection" style="display: none;">
            <div class="card">
                <div class="result-content">
                    <div class="result-icon" id="resultIcon">⚡</div>
                    <div class="result-message" id="resultMessage" data-translate="conversionComplete">转换完成</div>
                    <div class="result-actions">
                        <button id="downloadBtn" class="btn btn-success">
                            <span class="btn-icon">⬇</span>
                            <span class="btn-text" data-translate="downloadTcx">下载 TCX 文件</span>
                            <div class="btn-ripple"></div>
                        </button>
                        <button id="resetBtn" class="btn btn-secondary">
                            <span class="btn-icon">↻</span>
                            <span class="btn-text" data-translate="reset">重新开始</span>
                            <div class="btn-ripple"></div>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="features animate-fade-in animate-delay-10">
            <div class="card">
                <h3 data-translate="coreFeatures">核心功能</h3>
                <div class="feature-grid">
                <div class="feature-item">
                    <div class="feature-icon">⚡</div>
                    <div class="feature-content">
                        <div class="feature-title" data-translate="instantProcessing">极速转换</div>
                        <div class="feature-desc" data-translate="instantDesc">先进算法实现毫秒级 GPX 到 TCX 格式转换</div>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">🎯</div>
                    <div class="feature-content">
                        <div class="feature-title" data-translate="precisionData">精确数据</div>
                        <div class="feature-desc" data-translate="precisionDesc">保持原始轨迹精度，确保数据完整性</div>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">🔒</div>
                    <div class="feature-content">
                        <div class="feature-title" data-translate="privacyFirst">隐私保护</div>
                        <div class="feature-desc" data-translate="privacyDesc">本地处理确保您的运动数据不会离开设备</div>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">📱</div>
                    <div class="feature-content">
                        <div class="feature-title" data-translate="universalAccess">跨平台支持</div>
                        <div class="feature-desc" data-translate="universalDesc">多平台兼容，随时随地进行无缝转换</div>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">⚙️</div>
                    <div class="feature-content">
                        <div class="feature-title" data-translate="advancedConfig">高级配置</div>
                        <div class="feature-desc" data-translate="advancedDesc">为专业运动员提供全面的参数自定义选项</div>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">🌍</div>
                    <div class="feature-content">
                        <div class="feature-title" data-translate="smartLocation">智能定位</div>
                        <div class="feature-desc" data-translate="smartDesc">智能天气集成，提供个性化训练洞察</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 多语言支持
        const translations = {
            'zh': {
                pageTitle: '🥷秘术 - GPX 转 TCX 转换器 - 专业运动数据转换工具',
                welcomeTitle: '超越想象而奔跑',
                welcomeSubtitle: '将你的旅程转化为无限可能',
                title: 'Run Beyond Imagination',
                subtitle: '随时随地，专业运动数据转换',
                status: '状态',
                online: '● 在线',
                format: '格式',
                speed: '速度',
                developer: '开发者',
                weather: '天气',
                warning: '⚠️ 仅供测试使用，请勿用于正式比赛',
                uploadText: '拖拽GPX文件到此处',
                uploadHint: '支持.gpx格式 • 最大10MB • 即时处理',
                sportConfig: '🏃‍♂️ 运动设置',
                activityType: '运动类型',
                running: '跑步 (通用)',
                runningStreet: '路跑',
                runningTrail: '越野跑',
                runningTrack: '田径跑道',
                runningTreadmill: '跑步机',
                runningIndoor: '室内跑步',
                cycling: '骑行',
                walking: '步行',
                targetPace: '目标配速 (分:秒/公里)',
                weight: '体重 (kg)',
                heartRate: '💓 心率与时间',
                baseHr: '基础心率',
                maxHr: '最大心率',
                cadenceConfig: '🦵 步频与功率',
                baseCadence: '基础步频 (显示)',
                maxCadence: '最大步频 (显示)',
                powerConfig: '⚡ 功率设置',
                basePower: '基础功率',
                maxPower: '最大功率',
                deviceInfo: '📱 设备与格式',
                deviceName: '设备名称',
                deviceVersion: '设备版本',
                timeConfig: '🕐 时间设置',
                startTime: '自定义开始时间 (可选)',
                caloriesPerKm: '卡路里/公里',
                routePreview: '🗺️ 路径预览',
                convertBtn: '开始转换',
                initializing: '初始化中...',
                conversionComplete: '转换完成',
                downloadTcx: '下载TCX文件',
                reset: '重新转换',
                coreFeatures: '核心功能',
                instantProcessing: '即时处理',
                instantDesc: '先进算法实现亚秒级GPX到TCX转换',
                precisionData: '精确数据',
                precisionDesc: '保持原始轨迹精度，完整数据完整性',
                privacyFirst: '隐私优先',
                privacyDesc: '本地处理确保您的健身数据不会离开设备',
                fileSelected: '已选择',
                fileSize: '文件大小',
                clickToSelect: '点击选择GPX文件或拖拽到此处',
                maxFileSize: '支持最大16MB的GPX文件',
                universalAccess: '通用访问',
                universalDesc: '跨平台兼容性，随时随地无缝转换',
                advancedConfig: '高级配置',
                advancedDesc: '为专业运动员提供全面的参数定制',
                smartLocation: '智能定位',
                smartDesc: '智能天气集成，提供个性化训练洞察',
                routePreview: '🗺️ 路径预览',
                totalDistance: '总距离',
                trackPoints: '轨迹点',
                elevationGain: '海拔变化',
                routeDetails: '📍 轨迹详情',
                routeName: '名称',
                routeDesc: '描述',
                timeRange: '时间范围',
                avgSpeed: '平均速度',
                location: '位置',
                country: '国家',
                province: '省份',
                city: '城市',
                loadingLocation: '获取中...',
                locationError: '获取失败',
                startPoint: '起点',
                endPoint: '终点',
                unnamedTrack: '未命名轨迹',
                unknown: '未知',
                // 错误消息
                errorInvalidFile: '请选择GPX格式的文件',
                errorFileSize: '文件大小不能超过16MB',
                errorNoFile: '请先选择GPX文件',
                errorUploadFailed: '上传失败',
                errorConversionFailed: '转换失败',
                errorStatusFailed: '获取状态失败',
                // 状态文本
                converting: '转换中...',
                preparing: '准备中...',
                conversionCompleteMsg: '转换完成！',
                startConvert: '开始转换',
                errorGreetingFailed: '获取问候信息失败',
                errorLocationFailed: '获取位置信息失败',
                china: '中国',
                // Footer translations
                enterpriseSecurity: '企业级安全认证',
                privacyPolicy: '隐私政策',
                termsOfService: '服务条款',
                securityInfo: '安全说明',
                copyrightText: '© 2024 GPX转TCX专业版',
                dataSecurityGuarantee: '数据安全保障'
            },
            'en': {
                pageTitle: '🥷Secret Arts - GPX to TCX Converter - Professional Sports Data Conversion Tool',
                welcomeTitle: 'Run beyond imagination',
                welcomeSubtitle: 'Transform your journey into endless possibilities',
                title: 'Run Beyond Imagination',
                subtitle: 'Professional Sports Data Conversion Anytime, Anywhere',
                status: 'Status',
                online: '● Online',
                format: 'Format',
                speed: 'Speed',
                developer: 'Developer',
                weather: 'Weather',
                warning: '⚠️ For testing only, not for official competitions',
                uploadText: 'Drag GPX files here',
                uploadHint: 'Supports .gpx format • Max 10MB • Instant processing',
                sportConfig: '🏃‍♂️ Sport Settings',
                activityType: 'Activity Type',
                running: 'Running (Generic)',
                runningStreet: 'Street Running',
                runningTrail: 'Trail Running',
                runningTrack: 'Track Running',
                runningTreadmill: 'Treadmill Running',
                runningIndoor: 'Indoor Running',
                cycling: 'Cycling',
                walking: 'Walking',
                targetPace: 'Target Pace (min:sec/km)',
                weight: 'Weight (kg)',
                caloriesPerKm: 'Calories per km',
                routePreview: '🗺️ Route Preview',
                heartRate: '💓 Heart Rate & Time',
                baseHr: 'Base Heart Rate',
                maxHr: 'Max Heart Rate',
                cadenceConfig: '🦵 Cadence & Power',
                baseCadence: 'Base Cadence (display)',
                maxCadence: 'Max Cadence (display)',
                powerConfig: '⚡ Power Settings',
                basePower: 'Base Power',
                maxPower: 'Max Power',
                deviceInfo: '📱 Device & Format',
                deviceName: 'Device Name',
                deviceVersion: 'Device Version',
                format: 'Conversion Format',
                timeConfig: '🕐 Time Settings',
                startTime: 'Custom Start Time (optional)',
                caloriesPerKm: 'Calories/km',
                convertBtn: 'Start Conversion',
                initializing: 'Initializing...',
                conversionComplete: 'Conversion Complete',
                downloadTcx: 'Download TCX File',
                reset: 'Convert Again',
                coreFeatures: 'Core Features',
                instantProcessing: 'Instant Processing',
                instantDesc: 'Advanced algorithms for sub-second GPX to TCX conversion',
                precisionData: 'Precision Data',
                precisionDesc: 'Maintains original track precision and complete data integrity',
                privacyFirst: 'Privacy First',
                privacyDesc: 'Local processing ensures your fitness data never leaves your device',
                fileSelected: 'Selected',
                fileSize: 'File Size',
                clickToSelect: 'Click to select GPX file or drag here',
                maxFileSize: 'Supports GPX files up to 16MB',
                universalAccess: 'Universal Access',
                universalDesc: 'Cross-platform compatibility for seamless conversion anywhere',
                advancedConfig: 'Advanced Configuration',
                advancedDesc: 'Comprehensive parameter customization for professional athletes',
                smartLocation: 'Smart Location',
                smartDesc: 'Intelligent weather integration for personalized training insights',
                routePreview: '🗺️ Route Preview',
                totalDistance: 'Total Distance',
                trackPoints: 'Track Points',
                elevationGain: 'Elevation Gain',
                routeDetails: '📍 Route Details',
                routeName: 'Name',
                routeDesc: 'Description',
                timeRange: 'Time Range',
                avgSpeed: 'Average Speed',
                location: 'Location',
                country: 'Country',
                province: 'Province',
                city: 'City',
                loadingLocation: 'Loading...',
                locationError: 'Failed',
                startPoint: 'Start Point',
                endPoint: 'End Point',
                unnamedTrack: 'Unnamed Track',
                unknown: 'Unknown',
                // Error messages
                errorInvalidFile: 'Please select a GPX format file',
                errorFileSize: 'File size cannot exceed 16MB',
                errorNoFile: 'Please select a GPX file first',
                errorUploadFailed: 'Upload failed',
                errorConversionFailed: 'Conversion failed',
                errorStatusFailed: 'Failed to get status',
                // Status text
                converting: 'Converting...',
                preparing: 'Preparing...',
                conversionCompleteMsg: 'Conversion completed!',
                startConvert: 'Start Conversion',
                errorGreetingFailed: 'Failed to get greeting information',
                errorLocationFailed: 'Failed to get location information',
                china: 'China',
                // Footer translations
                enterpriseSecurity: 'Enterprise Security Certified',
                privacyPolicy: 'Privacy Policy',
                termsOfService: 'Terms of Service',
                securityInfo: 'Security Information',
                copyrightText: '© 2024 GPX to TCX Professional',
                dataSecurityGuarantee: 'Data Security Guarantee'
            },
            'ja': {
                pageTitle: '🥷秘術 - GPX から TCX コンバーター - プロスポーツデータ変換ツール',
                welcomeTitle: '想像を超えて走る',
                welcomeSubtitle: 'あなたの旅路を無限の可能性へ変える',
                title: 'Run Beyond Imagination',
                subtitle: 'いつでもどこでも、プロのスポーツデータ変換',
                status: 'ステータス',
                online: '● オンライン',
                format: 'フォーマット',
                speed: 'スピード',
                developer: '開発者',
                weather: '天気',
                warning: '⚠️ テスト用のみ、公式競技では使用しないでください',
                uploadText: 'GPXファイルをここにドラッグ',
                uploadHint: '.gpx形式対応 • 最大10MB • 即座処理',
                sportConfig: '🏃‍♂️ スポーツ設定',
                activityType: 'アクティビティタイプ',
                running: 'ランニング (一般)',
                runningStreet: 'ロードランニング',
                runningTrail: 'トレイルランニング',
                runningTrack: 'トラックランニング',
                runningTreadmill: 'トレッドミルランニング',
                runningIndoor: '室内ランニング',
                cycling: 'サイクリング',
                walking: 'ウォーキング',
                targetPace: '目標ペース (分:秒/km)',
                weight: '体重 (kg)',
                caloriesPerKm: '1kmあたりのカロリー',
                routePreview: '🗺️ ルートプレビュー',
                heartRate: '💓 心拍数と時間',
                baseHr: '基本心拍数',
                maxHr: '最大心拍数',
                cadenceConfig: '🦵 ケイデンスとパワー',
                baseCadence: '基本ケイデンス (表示)',
                maxCadence: '最大ケイデンス (表示)',
                powerConfig: '⚡ パワー設定',
                basePower: '基本パワー',
                maxPower: '最大パワー',
                deviceInfo: '📱 デバイスとフォーマット',
                deviceName: 'デバイス名',
                deviceVersion: 'デバイスバージョン',
                format: '変換フォーマット',
                timeConfig: '🕐 時間設定',
                startTime: 'カスタム開始時間 (オプション)',
                caloriesPerKm: 'カロリー/km',
                convertBtn: '変換開始',
                initializing: '初期化中...',
                conversionComplete: '変換完了',
                downloadTcx: 'TCXファイルダウンロード',
                reset: '再変換',
                coreFeatures: 'コア機能',
                instantProcessing: '即座処理',
                instantDesc: '高度なアルゴリズムによる1秒未満のGPXからTCX変換',
                precisionData: '精密データ',
                precisionDesc: '元のトラック精度を維持し、完全なデータ整合性を保持',
                privacyFirst: 'プライバシー優先',
                privacyDesc: 'ローカル処理により、フィットネスデータがデバイスから離れることはありません',
                fileSelected: '選択済み',
                fileSize: 'ファイルサイズ',
                clickToSelect: 'GPXファイルを選択またはここにドラッグ',
                maxFileSize: '最大16MBのGPXファイルをサポート',
                universalAccess: 'ユニバーサルアクセス',
                universalDesc: 'クロスプラットフォーム互換性により、どこでもシームレスな変換',
                advancedConfig: '高度な設定',
                advancedDesc: 'プロアスリート向けの包括的なパラメータカスタマイズ',
                smartLocation: 'スマートロケーション',
                smartDesc: 'インテリジェントな天気統合によるパーソナライズされたトレーニング洞察',
                routePreview: '🗺️ ルートプレビュー',
                totalDistance: '総距離',
                trackPoints: 'トラックポイント',
                elevationGain: '標高変化',
                routeDetails: '📍 ルート詳細',
                routeName: '名前',
                routeDesc: '説明',
                timeRange: '時間範囲',
                avgSpeed: '平均速度',
                location: '場所',
                country: '国',
                province: '県',
                city: '市',
                loadingLocation: '読み込み中...',
                locationError: '失敗',
                startPoint: 'スタート地点',
                endPoint: 'エンド地点',
                unnamedTrack: '名前なしトラック',
                unknown: '不明',
                // エラーメッセージ
                errorInvalidFile: 'GPX形式のファイルを選択してください',
                errorFileSize: 'ファイルサイズは16MBを超えることはできません',
                errorNoFile: '最初にGPXファイルを選択してください',
                errorUploadFailed: 'アップロードに失敗しました',
                errorConversionFailed: '変換に失敗しました',
                errorStatusFailed: 'ステータスの取得に失敗しました',
                // ステータステキスト
                converting: '変換中...',
                preparing: '準備中...',
                conversionCompleteMsg: '変換完了！',
                startConvert: '変換開始',
                errorGreetingFailed: '挨拶情報の取得に失敗しました',
                errorLocationFailed: '位置情報の取得に失敗しました',
                china: '中国',
                // Footer translations
                enterpriseSecurity: 'エンタープライズセキュリティ認証',
                privacyPolicy: 'プライバシーポリシー',
                termsOfService: '利用規約',
                securityInfo: 'セキュリティ情報',
                copyrightText: '© 2024 GPX to TCX プロフェッショナル',
                dataSecurityGuarantee: 'データセキュリティ保証'
             },
             'ko': {
                 pageTitle: '🥷비밀 기술 - GPX to TCX 변환기 - 전문 스포츠 데이터 변환 도구',
                 welcomeTitle: '상상을 넘어 달리다',
                 welcomeSubtitle: '당신의 여정을 무한한 가능성으로 변화시키다',
                 title: 'Run Beyond Imagination',
                 subtitle: '언제 어디서나, 전문 스포츠 데이터 변환',
                 status: '상태',
                 online: '● 온라인',
                 format: '형식',
                 speed: '속도',
                 developer: '개발자',
                 weather: '날씨',
                 warning: '⚠️ 테스트 전용, 공식 경기에서 사용하지 마세요',
                 uploadText: 'GPX 파일을 여기에 드래그',
                 uploadHint: '.gpx 형식 지원 • 최대 10MB • 즉시 처리',
                 sportConfig: '🏃‍♂️ 스포츠 설정',
                 activityType: '활동 유형',
                 running: '달리기 (일반)',
                runningStreet: '도로 달리기',
                runningTrail: '트레일 달리기',
                runningTrack: '트랙 달리기',
                runningTreadmill: '러닝머신 달리기',
                runningIndoor: '실내 달리기',
                cycling: '사이클링',
                walking: '걷기',
                 targetPace: '목표 페이스 (분:초/km)',
                 weight: '체중 (kg)',
                 heartRate: '💓 심박수 및 시간',
                 baseHr: '기본 심박수',
                 maxHr: '최대 심박수',
                 cadenceConfig: '🦵 케이던스 및 파워',
                 baseCadence: '기본 케이던스 (표시)',
                 maxCadence: '최대 케이던스 (표시)',
                 powerConfig: '⚡ 파워 설정',
                 basePower: '기본 파워',
                 maxPower: '최대 파워',
                 deviceInfo: '📱 장치 및 형식',
                 deviceName: '장치 이름',
                 deviceVersion: '장치 버전',
                format: '변환 형식',
                timeConfig: '🕐 시간 설정',
                 startTime: '사용자 정의 시작 시간 (선택사항)',
                 caloriesPerKm: '칼로리/km',
                routePreview: '🗺️ 경로 미리보기',
                convertBtn: '변환 시작',
                 initializing: '초기화 중...',
                 conversionComplete: '변환 완료',
                 downloadTcx: 'TCX 파일 다운로드',
                 reset: '다시 변환',
                 coreFeatures: '핵심 기능',
                 instantProcessing: '즉시 처리',
                 instantDesc: '고급 알고리즘으로 1초 미만의 GPX에서 TCX 변환',
                 precisionData: '정밀 데이터',
                 precisionDesc: '원본 트랙 정밀도 유지 및 완전한 데이터 무결성',
                 privacyFirst: '개인정보 우선',
                privacyDesc: '로컬 처리로 피트니스 데이터가 장치를 떠나지 않음',
                fileSelected: '선택됨',
                fileSize: '파일 크기',
                clickToSelect: 'GPX 파일을 선택하거나 여기로 드래그',
                maxFileSize: '최대 16MB GPX 파일 지원',
                 universalAccess: '범용 액세스',
                 universalDesc: '크로스 플랫폼 호환성으로 어디서나 원활한 변환',
                 advancedConfig: '고급 구성',
                 advancedDesc: '전문 운동선수를 위한 포괄적인 매개변수 사용자 정의',
                 smartLocation: '스마트 위치',
                 smartDesc: '개인화된 훈련 통찰력을 위한 지능형 날씨 통합',
                 routePreview: '🗺️ 경로 미리보기',
                 totalDistance: '총 거리',
                 trackPoints: '트랙 포인트',
                 elevationGain: '고도 변화',
                 routeDetails: '📍 경로 세부사항',
                 routeName: '이름',
                 routeDesc: '설명',
                 timeRange: '시간 범위',
                 avgSpeed: '평균 속도',
                 location: '위치',
                 country: '국가',
                 province: '도/주',
                 city: '시',
                 loadingLocation: '로딩 중...',
                 locationError: '실패',
                 startPoint: '시작점',
                 endPoint: '끝점',
                 unnamedTrack: '이름 없는 트랙',
                 unknown: '알 수 없음',
                 // 오류 메시지
                 errorInvalidFile: 'GPX 형식의 파일을 선택해주세요',
                 errorFileSize: '파일 크기는 16MB를 초과할 수 없습니다',
                 errorNoFile: '먼저 GPX 파일을 선택해주세요',
                 errorUploadFailed: '업로드 실패',
                 errorConversionFailed: '변환 실패',
                 errorStatusFailed: '상태 가져오기 실패',
                 // 상태 텍스트
                 converting: '변환 중...',
                 preparing: '준비 중...',
                 conversionCompleteMsg: '변환 완료!',
                startConvert: '변환 시작',
                errorGreetingFailed: '인사말 정보 가져오기 실패',
                errorLocationFailed: '위치 정보 가져오기 실패',
                china: '중국',
                // Footer translations
                enterpriseSecurity: '기업급 보안 인증',
                privacyPolicy: '개인정보 보호정책',
                termsOfService: '서비스 약관',
                securityInfo: '보안 정보',
                copyrightText: '© 2024 GPX to TCX 프로페셔널',
                dataSecurityGuarantee: '데이터 보안 보장'
             },
             'fr': {
                 pageTitle: '🥷Arts Secrets - Convertisseur GPX vers TCX - Outil de Conversion de Données Sportives Professionnel',
                 welcomeTitle: 'Courir au-delà de l\'imagination',
                 welcomeSubtitle: 'Transformez votre voyage en possibilités infinies',
                 title: 'Run Beyond Imagination',
                 subtitle: 'Conversion de données sportives professionnelles partout, à tout moment',
                 status: 'Statut',
                 online: '● En ligne',
                 format: 'Format',
                 speed: 'Vitesse',
                 developer: 'Développeur',
                 weather: 'Météo',
                 warning: '⚠️ Pour tests uniquement, ne pas utiliser en compétition officielle',
                 uploadText: 'Glissez les fichiers GPX ici',
                 uploadHint: 'Supporte le format .gpx • Max 10MB • Traitement instantané',
                 sportConfig: '🏃‍♂️ Paramètres Sport',
                 activityType: 'Type d\'activité',
                 running: 'Course (Générique)',
                runningStreet: 'Course sur route',
                runningTrail: 'Course de trail',
                runningTrack: 'Course sur piste',
                runningTreadmill: 'Course sur tapis',
                runningIndoor: 'Course en salle',
                cycling: 'Cyclisme',
                walking: 'Marche',
                 targetPace: 'Allure cible (min:sec/km)',
                 weight: 'Poids (kg)',
                 heartRate: '💓 Fréquence cardiaque et temps',
                 baseHr: 'FC de base',
                 maxHr: 'FC maximale',
                 cadenceConfig: '🦵 Cadence et puissance',
                 baseCadence: 'Cadence de base (affichage)',
                 maxCadence: 'Cadence maximale (affichage)',
                 powerConfig: '⚡ Paramètres de puissance',
                 basePower: 'Puissance de base',
                 maxPower: 'Puissance maximale',
                 deviceInfo: '📱 Appareil et format',
                 deviceName: 'Nom de l\'appareil',
                 deviceVersion: 'Version de l\'appareil',
                 timeConfig: '🕐 Paramètres de temps',
                 startTime: 'Heure de début personnalisée (optionnel)',
                 caloriesPerKm: 'Calories/km',
                routePreview: '🗺️ Aperçu de l\'itinéraire',
                convertBtn: 'Commencer la conversion',
                 initializing: 'Initialisation...',
                 conversionComplete: 'Conversion terminée',
                 downloadTcx: 'Télécharger le fichier TCX',
                 reset: 'Convertir à nouveau',
                 coreFeatures: 'Fonctionnalités principales',
                 instantProcessing: 'Traitement instantané',
                 instantDesc: 'Algorithmes avancés pour conversion GPX vers TCX en moins d\'une seconde',
                 precisionData: 'Données de précision',
                 precisionDesc: 'Maintient la précision de piste originale et l\'intégrité complète des données',
                 privacyFirst: 'Confidentialité d\'abord',
                privacyDesc: 'Le traitement local garantit que vos données de fitness ne quittent jamais votre appareil',
                fileSelected: 'Sélectionné',
                fileSize: 'Taille du fichier',
                clickToSelect: 'Cliquez pour sélectionner un fichier GPX ou faites glisser ici',
                maxFileSize: 'Prend en charge les fichiers GPX jusqu\'à 16 Mo',
                 universalAccess: 'Accès universel',
                 universalDesc: 'Compatibilité multiplateforme pour une conversion transparente partout',
                 advancedConfig: 'Configuration avancée',
                 advancedDesc: 'Personnalisation complète des paramètres pour les athlètes professionnels',
                 smartLocation: 'Localisation intelligente',
                 smartDesc: 'Intégration météo intelligente pour des insights d\'entraînement personnalisés',
                 routePreview: '🗺️ Aperçu de l\'itinéraire',
                 totalDistance: 'Distance totale',
                 trackPoints: 'Points de piste',
                 elevationGain: 'Gain d\'altitude',
                 routeDetails: '📍 Détails de l\'itinéraire',
                 routeName: 'Nom',
                 routeDesc: 'Description',
                 timeRange: 'Plage de temps',
                 avgSpeed: 'Vitesse moyenne',
                 location: 'Emplacement',
                 country: 'Pays',
                 province: 'Province',
                 city: 'Ville',
                 loadingLocation: 'Chargement...',
                 locationError: 'Échec',
                 startPoint: 'Point de départ',
                 endPoint: 'Point d\'arrivée',
                unnamedTrack: 'Piste sans nom',
                unknown: 'Inconnu',
                // Messages d'erreur
                errorInvalidFile: 'Veuillez sélectionner un fichier au format GPX',
                errorFileSize: 'La taille du fichier ne peut pas dépasser 16MB',
                errorNoFile: 'Veuillez d\'abord sélectionner un fichier GPX',
                errorUploadFailed: 'Échec du téléchargement',
                errorConversionFailed: 'Échec de la conversion',
                errorStatusFailed: 'Échec de l\'obtention du statut',
                // Texte de statut
                converting: 'Conversion en cours...',
                preparing: 'Préparation...',
                conversionCompleteMsg: 'Conversion terminée!',
                startConvert: 'Commencer la conversion',
                errorGreetingFailed: 'Échec de l\'obtention des informations de salutation',
                errorLocationFailed: 'Échec de l\'obtention des informations de localisation',
                china: 'Chine',
                // Footer translations
                enterpriseSecurity: 'Certification de Sécurité Entreprise',
                privacyPolicy: 'Politique de Confidentialité',
                termsOfService: 'Conditions de Service',
                securityInfo: 'Informations de Sécurité',
                copyrightText: '© 2024 GPX vers TCX Professionnel',
                dataSecurityGuarantee: 'Garantie de Sécurité des Données'
             },
             'de': {
                 pageTitle: '🥷Geheime Künste - GPX zu TCX Konverter - Professionelles Sportdaten-Konvertierungstool',
                 welcomeTitle: 'Laufen jenseits der Vorstellungskraft',
                 welcomeSubtitle: 'Verwandeln Sie Ihre Reise in endlose Möglichkeiten',
                 title: 'Run Beyond Imagination',
                 subtitle: 'Professionelle Sportdatenkonvertierung jederzeit, überall',
                 status: 'Status',
                 online: '● Online',
                 format: 'Format',
                 speed: 'Geschwindigkeit',
                 developer: 'Entwickler',
                 weather: 'Wetter',
                 warning: '⚠️ Nur zum Testen, nicht für offizielle Wettkämpfe verwenden',
                 uploadText: 'GPX-Dateien hier hinziehen',
                 uploadHint: 'Unterstützt .gpx-Format • Max 10MB • Sofortverarbeitung',
                 sportConfig: '🏃‍♂️ Sport-Einstellungen',
                 activityType: 'Aktivitätstyp',
                 running: 'Laufen (Allgemein)',
                runningStreet: 'Straßenlauf',
                runningTrail: 'Traillauf',
                runningTrack: 'Bahnlauf',
                runningTreadmill: 'Laufband',
                runningIndoor: 'Hallenlauf',
                cycling: 'Radfahren',
                walking: 'Gehen',
                 targetPace: 'Ziel-Tempo (min:sek/km)',
                 weight: 'Gewicht (kg)',
                 heartRate: '💓 Herzfrequenz & Zeit',
                 baseHr: 'Basis-Herzfrequenz',
                 maxHr: 'Max-Herzfrequenz',
                 cadenceConfig: '🦵 Trittfrequenz & Leistung',
                 baseCadence: 'Basis-Trittfrequenz (Anzeige)',
                 maxCadence: 'Max-Trittfrequenz (Anzeige)',
                 powerConfig: '⚡ Leistungseinstellungen',
                 basePower: 'Basis-Leistung',
                 maxPower: 'Max-Leistung',
                 deviceInfo: '📱 Gerät & Format',
                 deviceName: 'Gerätename',
                 deviceVersion: 'Geräteversion',
                 timeConfig: '🕐 Zeiteinstellungen',
                 startTime: 'Benutzerdefinierte Startzeit (optional)',
                 caloriesPerKm: 'Kalorien/km',
                routePreview: '🗺️ Routenvorschau',
                convertBtn: 'Konvertierung starten',
                 initializing: 'Initialisierung...',
                 conversionComplete: 'Konvertierung abgeschlossen',
                 downloadTcx: 'TCX-Datei herunterladen',
                 reset: 'Erneut konvertieren',
                 coreFeatures: 'Kernfunktionen',
                 instantProcessing: 'Sofortverarbeitung',
                 instantDesc: 'Erweiterte Algorithmen für GPX-zu-TCX-Konvertierung in unter einer Sekunde',
                 precisionData: 'Präzisionsdaten',
                 precisionDesc: 'Erhält ursprüngliche Spurpräzision und vollständige Datenintegrität',
                 privacyFirst: 'Datenschutz zuerst',
                privacyDesc: 'Lokale Verarbeitung stellt sicher, dass Ihre Fitnessdaten Ihr Gerät nie verlassen',
                fileSelected: 'Ausgewählt',
                fileSize: 'Dateigröße',
                clickToSelect: 'Klicken Sie, um GPX-Datei auszuwählen oder hier hinziehen',
                maxFileSize: 'Unterstützt GPX-Dateien bis zu 16 MB',
                 universalAccess: 'Universeller Zugang',
                 universalDesc: 'Plattformübergreifende Kompatibilität für nahtlose Konvertierung überall',
                 advancedConfig: 'Erweiterte Konfiguration',
                 advancedDesc: 'Umfassende Parameteranpassung für Profisportler',
                 smartLocation: 'Intelligente Standortbestimmung',
                 smartDesc: 'Intelligente Wetterintegration für personalisierte Trainingseinblicke',
                 routePreview: '🗺️ Routenvorschau',
                 totalDistance: 'Gesamtdistanz',
                 trackPoints: 'Spurpunkte',
                 elevationGain: 'Höhengewinn',
                 routeDetails: '📍 Routendetails',
                 routeName: 'Name',
                 routeDesc: 'Beschreibung',
                 timeRange: 'Zeitbereich',
                 avgSpeed: 'Durchschnittsgeschwindigkeit',
                 location: 'Standort',
                 country: 'Land',
                 province: 'Provinz',
                 city: 'Stadt',
                 loadingLocation: 'Laden...',
                 locationError: 'Fehlgeschlagen',
                 startPoint: 'Startpunkt',
                 endPoint: 'Endpunkt',
                unnamedTrack: 'Unbenannte Spur',
                unknown: 'Unbekannt',
                // Fehlermeldungen
                errorInvalidFile: 'Bitte wählen Sie eine GPX-Datei aus',
                errorFileSize: 'Dateigröße darf 16MB nicht überschreiten',
                errorNoFile: 'Bitte wählen Sie zuerst eine GPX-Datei aus',
                errorUploadFailed: 'Upload fehlgeschlagen',
                errorConversionFailed: 'Konvertierung fehlgeschlagen',
                errorStatusFailed: 'Status abrufen fehlgeschlagen',
                // Statustext
                converting: 'Konvertierung läuft...',
                preparing: 'Vorbereitung...',
                conversionCompleteMsg: 'Konvertierung abgeschlossen!',
                startConvert: 'Konvertierung starten',
                errorGreetingFailed: 'Fehler beim Abrufen der Begrüßungsinformationen',
                errorLocationFailed: 'Fehler beim Abrufen der Standortinformationen',
                china: 'China',
                // Footer translations
                enterpriseSecurity: 'Unternehmenssicherheitszertifizierung',
                privacyPolicy: 'Datenschutzrichtlinie',
                termsOfService: 'Nutzungsbedingungen',
                securityInfo: 'Sicherheitsinformationen',
                copyrightText: '© 2024 GPX zu TCX Professional',
                dataSecurityGuarantee: 'Datensicherheitsgarantie'
             },
             'es': {
                 pageTitle: '🥷Artes Secretas - Convertidor GPX a TCX - Herramienta Profesional de Conversión de Datos Deportivos',
                 welcomeTitle: 'Correr más allá de la imaginación',
                 welcomeSubtitle: 'Transforma tu viaje en posibilidades infinitas',
                 title: 'Run Beyond Imagination',
                 subtitle: 'Conversión de datos deportivos profesionales en cualquier momento y lugar',
                 status: 'Estado',
                 online: '● En línea',
                 format: 'Formato',
                 speed: 'Velocidad',
                 developer: 'Desarrollador',
                 weather: 'Clima',
                 warning: '⚠️ Solo para pruebas, no usar en competiciones oficiales',
                 uploadText: 'Arrastra archivos GPX aquí',
                 uploadHint: 'Soporta formato .gpx • Máx 10MB • Procesamiento instantáneo',
                 sportConfig: '🏃‍♂️ Configuración de deporte',
                 activityType: 'Tipo de actividad',
                 running: 'Correr (Genérico)',
                runningStreet: 'Correr en calle',
                runningTrail: 'Trail running',
                runningTrack: 'Correr en pista',
                runningTreadmill: 'Cinta de correr',
                runningIndoor: 'Correr en interior',
                cycling: 'Ciclismo',
                walking: 'Caminar',
                 targetPace: 'Ritmo objetivo (min:seg/km)',
                 weight: 'Peso (kg)',
                 heartRate: '💓 Frecuencia cardíaca y tiempo',
                 baseHr: 'FC base',
                 maxHr: 'FC máxima',
                 cadenceConfig: '🦵 Cadencia y potencia',
                 baseCadence: 'Cadencia base (mostrar)',
                 maxCadence: 'Cadencia máxima (mostrar)',
                 powerConfig: '⚡ Configuración de potencia',
                 basePower: 'Potencia base',
                 maxPower: 'Potencia máxima',
                 deviceInfo: '📱 Dispositivo y formato',
                 deviceName: 'Nombre del dispositivo',
                 deviceVersion: 'Versión del dispositivo',
                 timeConfig: '🕐 Configuración de tiempo',
                 startTime: 'Hora de inicio personalizada (opcional)',
                 caloriesPerKm: 'Calorías/km',
                routePreview: '🗺️ Vista previa de ruta',
                convertBtn: 'Iniciar conversión',
                 initializing: 'Inicializando...',
                 conversionComplete: 'Conversión completada',
                 downloadTcx: 'Descargar archivo TCX',
                 reset: 'Convertir de nuevo',
                 coreFeatures: 'Características principales',
                 instantProcessing: 'Procesamiento instantáneo',
                 instantDesc: 'Algoritmos avanzados para conversión GPX a TCX en menos de un segundo',
                 precisionData: 'Datos de precisión',
                 precisionDesc: 'Mantiene la precisión de pista original y la integridad completa de datos',
                 privacyFirst: 'Privacidad primero',
                privacyDesc: 'El procesamiento local asegura que sus datos de fitness nunca salgan de su dispositivo',
                fileSelected: 'Seleccionado',
                fileSize: 'Tamaño del archivo',
                clickToSelect: 'Haga clic para seleccionar archivo GPX o arrastre aquí',
                maxFileSize: 'Admite archivos GPX de hasta 16 MB',
                 universalAccess: 'Acceso universal',
                 universalDesc: 'Compatibilidad multiplataforma para conversión perfecta en cualquier lugar',
                 advancedConfig: 'Configuración avanzada',
                 advancedDesc: 'Personalización completa de parámetros para atletas profesionales',
                 smartLocation: 'Ubicación inteligente',
                 smartDesc: 'Integración meteorológica inteligente para insights de entrenamiento personalizados',
                 routePreview: '🗺️ Vista previa de ruta',
                 totalDistance: 'Distancia total',
                 trackPoints: 'Puntos de pista',
                 elevationGain: 'Ganancia de elevación',
                 routeDetails: '📍 Detalles de ruta',
                 routeName: 'Nombre',
                 routeDesc: 'Descripción',
                 timeRange: 'Rango de tiempo',
                 avgSpeed: 'Velocidad promedio',
                 location: 'Ubicación',
                 country: 'País',
                 province: 'Provincia',
                 city: 'Ciudad',
                 loadingLocation: 'Cargando...',
                 locationError: 'Falló',
                 startPoint: 'Punto de inicio',
                 endPoint: 'Punto final',
                unnamedTrack: 'Pista sin nombre',
                unknown: 'Desconocido',
                // Mensajes de error
                errorInvalidFile: 'Por favor seleccione un archivo en formato GPX',
                errorFileSize: 'El tamaño del archivo no puede exceder 16MB',
                errorNoFile: 'Por favor seleccione primero un archivo GPX',
                errorUploadFailed: 'Fallo en la carga',
                errorConversionFailed: 'Fallo en la conversión',
                errorStatusFailed: 'Fallo al obtener el estado',
                // Texto de estado
                converting: 'Convirtiendo...',
                preparing: 'Preparando...',
                conversionCompleteMsg: '¡Conversión completada!',
                startConvert: 'Iniciar conversión',
                errorGreetingFailed: 'Error al obtener información de saludo',
                errorLocationFailed: 'Error al obtener información de ubicación',
                china: 'China',
                // Footer translations
                enterpriseSecurity: 'Certificación de Seguridad Empresarial',
                privacyPolicy: 'Política de Privacidad',
                termsOfService: 'Términos de Servicio',
                securityInfo: 'Información de Seguridad',
                copyrightText: '© 2024 GPX a TCX Profesional',
                dataSecurityGuarantee: 'Garantía de Seguridad de Datos'
             },
             'pt': {
                 pageTitle: '🥷Artes Secretas - Conversor GPX para TCX - Ferramenta Profissional de Conversão de Dados Esportivos',
                 welcomeTitle: 'Correr além da imaginação',
                 welcomeSubtitle: 'Transforme sua jornada em possibilidades infinitas',
                 title: 'Run Beyond Imagination',
                 subtitle: 'Conversão profissional de dados esportivos a qualquer hora, em qualquer lugar',
                 status: 'Status',
                 online: '● Online',
                 format: 'Formato',
                 speed: 'Velocidade',
                 developer: 'Desenvolvedor',
                 weather: 'Clima',
                 warning: '⚠️ Apenas para testes, não usar em competições oficiais',
                 uploadText: 'Arraste arquivos GPX aqui',
                 uploadHint: 'Suporta formato .gpx • Máx 10MB • Processamento instantâneo',
                 sportConfig: '🏃‍♂️ Configurações de esporte',
                 activityType: 'Tipo de atividade',
                 running: 'Corrida (Genérica)',
                runningStreet: 'Corrida de rua',
                runningTrail: 'Corrida de trilha',
                runningTrack: 'Corrida de pista',
                runningTreadmill: 'Esteira',
                runningIndoor: 'Corrida indoor',
                cycling: 'Ciclismo',
                walking: 'Caminhada',
                 targetPace: 'Ritmo alvo (min:seg/km)',
                 weight: 'Peso (kg)',
                 heartRate: '💓 Frequência cardíaca e tempo',
                 baseHr: 'FC base',
                 maxHr: 'FC máxima',
                 cadenceConfig: '🦵 Cadência e potência',
                 baseCadence: 'Cadência base (exibir)',
                 maxCadence: 'Cadência máxima (exibir)',
                 powerConfig: '⚡ Configurações de potência',
                 basePower: 'Potência base',
                 maxPower: 'Potência máxima',
                 deviceInfo: '📱 Dispositivo e formato',
                 deviceName: 'Nome do dispositivo',
                 deviceVersion: 'Versão do dispositivo',
                 timeConfig: '🕐 Configurações de tempo',
                 startTime: 'Hora de início personalizada (opcional)',
                 caloriesPerKm: 'Calorias/km',
                routePreview: '🗺️ Visualização da rota',
                convertBtn: 'Iniciar conversão',
                 initializing: 'Inicializando...',
                 conversionComplete: 'Conversão concluída',
                 downloadTcx: 'Baixar arquivo TCX',
                 reset: 'Converter novamente',
                 coreFeatures: 'Recursos principais',
                 instantProcessing: 'Processamento instantâneo',
                 instantDesc: 'Algoritmos avançados para conversão GPX para TCX em menos de um segundo',
                 precisionData: 'Dados de precisão',
                 precisionDesc: 'Mantém a precisão original da trilha e integridade completa dos dados',
                 privacyFirst: 'Privacidade em primeiro lugar',
                privacyDesc: 'Processamento local garante que seus dados de fitness nunca saiam do seu dispositivo',
                fileSelected: 'Selecionado',
                fileSize: 'Tamanho do arquivo',
                clickToSelect: 'Clique para selecionar arquivo GPX ou arraste aqui',
                maxFileSize: 'Suporta arquivos GPX de até 16 MB',
                 universalAccess: 'Acesso universal',
                 universalDesc: 'Compatibilidade multiplataforma para conversão perfeita em qualquer lugar',
                 advancedConfig: 'Configuração avançada',
                 advancedDesc: 'Personalização abrangente de parâmetros para atletas profissionais',
                 smartLocation: 'Localização inteligente',
                 smartDesc: 'Integração meteorológica inteligente para insights de treinamento personalizados',
                 routePreview: '🗺️ Visualização da rota',
                 totalDistance: 'Distância total',
                 trackPoints: 'Pontos da trilha',
                 elevationGain: 'Ganho de elevação',
                 routeDetails: '📍 Detalhes da rota',
                 routeName: 'Nome',
                 routeDesc: 'Descrição',
                 timeRange: 'Intervalo de tempo',
                 avgSpeed: 'Velocidade média',
                 location: 'Localização',
                 country: 'País',
                 province: 'Província',
                 city: 'Cidade',
                 loadingLocation: 'Carregando...',
                 locationError: 'Falhou',
                 startPoint: 'Ponto de partida',
                 endPoint: 'Ponto final',
                unnamedTrack: 'Trilha sem nome',
                unknown: 'Desconhecido',
                // Mensagens de erro
                errorInvalidFile: 'Por favor selecione um arquivo no formato GPX',
                errorFileSize: 'O tamanho do arquivo não pode exceder 16MB',
                errorNoFile: 'Por favor selecione primeiro um arquivo GPX',
                errorUploadFailed: 'Falha no upload',
                errorConversionFailed: 'Falha na conversão',
                errorStatusFailed: 'Falha ao obter status',
                // Texto de status
                converting: 'Convertendo...',
                preparing: 'Preparando...',
                conversionCompleteMsg: 'Conversão concluída!',
                startConvert: 'Iniciar conversão',
                errorGreetingFailed: 'Falha ao obter informações de saudação',
                errorLocationFailed: 'Falha ao obter informações de localização',
                china: 'China',
                // Footer translations
                enterpriseSecurity: 'Certificação de Segurança Empresarial',
                privacyPolicy: 'Política de Privacidade',
                termsOfService: 'Termos de Serviço',
                securityInfo: 'Informações de Segurança',
                copyrightText: '© 2024 GPX para TCX Profissional',
                dataSecurityGuarantee: 'Garantia de Segurança de Dados'
             },
             'zh-tw': {
                 pageTitle: '🥷秘術 - GPX 轉 TCX 轉換器 - 專業運動數據轉換工具',
                 welcomeTitle: '超越想像而奔跑',
                 welcomeSubtitle: '將你的旅程轉化為無限可能',
                 title: 'Run Beyond Imagination',
                 subtitle: '隨時隨地，專業運動數據轉換',
                 status: '狀態',
                 online: '● 線上',
                 format: '格式',
                 speed: '速度',
                 developer: '開發者',
                 weather: '天氣',
                 warning: '⚠️ 僅供測試使用，請勿用於正式比賽',
                 uploadText: '拖拽GPX檔案到此處',
                 uploadHint: '支援.gpx格式 • 最大10MB • 即時處理',
                 sportConfig: '🏃‍♂️ 運動設定',
                 activityType: '運動類型',
                 running: '跑步 (通用)',
                runningStreet: '路跑',
                runningTrail: '越野跑',
                runningTrack: '田徑跑道',
                runningTreadmill: '跑步機',
                runningIndoor: '室內跑步',
                cycling: '騎行',
                walking: '步行',
                 targetPace: '目標配速 (分:秒/公里)',
                 weight: '體重 (kg)',
                 heartRate: '💓 心率與時間',
                 baseHr: '基礎心率',
                 maxHr: '最大心率',
                 cadenceConfig: '🦵 步頻與功率',
                 baseCadence: '基礎步頻 (顯示)',
                 maxCadence: '最大步頻 (顯示)',
                 powerConfig: '⚡ 功率設定',
                 basePower: '基礎功率',
                 maxPower: '最大功率',
                 deviceInfo: '📱 裝置與格式',
                 deviceName: '裝置名稱',
                 deviceVersion: '裝置版本',
                 timeConfig: '🕐 時間設定',
                 startTime: '自訂開始時間 (可選)',
                 caloriesPerKm: '卡路里/公里',
                routePreview: '🗺️ 路徑預覽',
                convertBtn: '開始轉換',
                 initializing: '初始化中...',
                 conversionComplete: '轉換完成',
                 downloadTcx: '下載TCX檔案',
                 reset: '重新轉換',
                 coreFeatures: '核心功能',
                 instantProcessing: '即時處理',
                 instantDesc: '先進演算法實現亞秒級GPX到TCX轉換',
                 precisionData: '精確數據',
                 precisionDesc: '保持原始軌跡精度，完整數據完整性',
                 privacyFirst: '隱私優先',
                privacyDesc: '本地處理確保您的健身數據不會離開裝置',
                fileSelected: '已選擇',
                fileSize: '檔案大小',
                clickToSelect: '點擊選擇GPX檔案或拖拽到此處',
                maxFileSize: '支援最大16MB的GPX檔案',
                 universalAccess: '通用存取',
                 universalDesc: '跨平台相容性，隨時隨地無縫轉換',
                 advancedConfig: '進階配置',
                 advancedDesc: '為專業運動員提供全面的參數定制',
                 smartLocation: '智慧定位',
                 smartDesc: '智慧天氣整合，提供個人化訓練洞察',
                 routePreview: '🗺️ 路徑預覽',
                 totalDistance: '總距離',
                 trackPoints: '軌跡點',
                 elevationGain: '海拔變化',
                 routeDetails: '📍 軌跡詳情',
                 routeName: '名稱',
                 routeDesc: '描述',
                 timeRange: '時間範圍',
                 avgSpeed: '平均速度',
                 location: '位置',
                 country: '國家',
                 province: '省份',
                 city: '城市',
                 loadingLocation: '獲取中...',
                 locationError: '獲取失敗',
                 startPoint: '起點',
                 endPoint: '終點',
                 unnamedTrack: '未命名軌跡',
                unknown: '未知',
                // 錯誤訊息
                errorInvalidFile: '請選擇GPX格式的檔案',
                errorFileSize: '檔案大小不能超過16MB',
                errorNoFile: '請先選擇GPX檔案',
                errorUploadFailed: '上傳失敗',
                errorConversionFailed: '轉換失敗',
                errorStatusFailed: '獲取狀態失敗',
                // 狀態文字
                converting: '轉換中...',
                preparing: '準備中...',
                conversionCompleteMsg: '轉換完成！',
                startConvert: '開始轉換',
                errorGreetingFailed: '獲取問候信息失敗',
                errorLocationFailed: '獲取位置信息失敗',
                china: '中國',
                // Footer translations
                enterpriseSecurity: '企業安全認證',
                privacyPolicy: '隱私政策',
                termsOfService: '服務條款',
                securityInfo: '安全信息',
                copyrightText: '© 2024 GPX 轉 TCX 專業版',
                dataSecurityGuarantee: '數據安全保障'
             },
             'it': {
                 pageTitle: '🥷Arti Segrete - Convertitore GPX a TCX - Strumento Professionale di Conversione Dati Sportivi',
                 welcomeTitle: 'Correre oltre l\'immaginazione',
                 welcomeSubtitle: 'Trasforma il tuo viaggio in possibilità infinite',
                 title: 'Run Beyond Imagination',
                 subtitle: 'Conversione professionale di dati sportivi sempre e ovunque',
                 status: 'Stato',
                 online: '● Online',
                 format: 'Formato',
                 speed: 'Velocità',
                 developer: 'Sviluppatore',
                 weather: 'Meteo',
                 warning: '⚠️ Solo per test, non utilizzare in competizioni ufficiali',
                 uploadText: 'Trascina i file GPX qui',
                 uploadHint: 'Supporta formato .gpx • Max 10MB • Elaborazione istantanea',
                 sportConfig: '🏃‍♂️ Impostazioni Sport',
                 activityType: 'Tipo di attività',
                 running: 'Corsa (Generica)',
                 runningStreet: 'Corsa su strada',
                 runningTrail: 'Trail running',
                 runningTrack: 'Corsa su pista',
                 runningTreadmill: 'Tapis roulant',
                 runningIndoor: 'Corsa indoor',
                 cycling: 'Ciclismo',
                 walking: 'Camminata',
                 targetPace: 'Ritmo target (min:sec/km)',
                 weight: 'Peso (kg)',
                 heartRate: '💓 Frequenza cardiaca e tempo',
                 baseHr: 'FC base',
                 maxHr: 'FC massima',
                 cadenceConfig: '🦵 Cadenza e potenza',
                 baseCadence: 'Cadenza base (visualizza)',
                 maxCadence: 'Cadenza massima (visualizza)',
                 powerConfig: '⚡ Impostazioni potenza',
                 basePower: 'Potenza base',
                 maxPower: 'Potenza massima',
                 deviceInfo: '📱 Dispositivo e formato',
                 deviceName: 'Nome dispositivo',
                 deviceVersion: 'Versione dispositivo',
                 timeConfig: '🕐 Impostazioni tempo',
                 startTime: 'Ora di inizio personalizzata (opzionale)',
                 caloriesPerKm: 'Calorie/km',
                 routePreview: '🗺️ Anteprima percorso',
                 convertBtn: 'Inizia conversione',
                 initializing: 'Inizializzazione...',
                 conversionComplete: 'Conversione completata',
                 downloadTcx: 'Scarica file TCX',
                 reset: 'Converti di nuovo',
                 coreFeatures: 'Funzionalità principali',
                 instantProcessing: 'Elaborazione istantanea',
                 instantDesc: 'Algoritmi avanzati per conversione GPX a TCX in meno di un secondo',
                 precisionData: 'Dati di precisione',
                 precisionDesc: 'Mantiene la precisione originale del tracciato e l\'integrità completa dei dati',
                 privacyFirst: 'Privacy prima di tutto',
                 privacyDesc: 'L\'elaborazione locale garantisce che i tuoi dati fitness non lascino mai il tuo dispositivo',
                 fileSelected: 'Selezionato',
                 fileSize: 'Dimensione file',
                 clickToSelect: 'Clicca per selezionare file GPX o trascina qui',
                 maxFileSize: 'Supporta file GPX fino a 16 MB',
                 universalAccess: 'Accesso universale',
                 universalDesc: 'Compatibilità multipiattaforma per conversione senza interruzioni ovunque',
                 advancedConfig: 'Configurazione avanzata',
                 advancedDesc: 'Personalizzazione completa dei parametri per atleti professionisti',
                 smartLocation: 'Posizione intelligente',
                 smartDesc: 'Integrazione meteo intelligente per approfondimenti di allenamento personalizzati',
                 routePreview: '🗺️ Anteprima percorso',
                 totalDistance: 'Distanza totale',
                 trackPoints: 'Punti tracciato',
                 elevationGain: 'Guadagno di elevazione',
                 routeDetails: '📍 Dettagli percorso',
                 routeName: 'Nome',
                 routeDesc: 'Descrizione',
                 timeRange: 'Intervallo di tempo',
                 avgSpeed: 'Velocità media',
                 location: 'Posizione',
                 country: 'Paese',
                 province: 'Provincia',
                 city: 'Città',
                 loadingLocation: 'Caricamento...',
                 locationError: 'Fallito',
                 startPoint: 'Punto di partenza',
                 endPoint: 'Punto di arrivo',
                 unnamedTrack: 'Tracciato senza nome',
                 unknown: 'Sconosciuto',
                 // Messaggi di errore
                 errorInvalidFile: 'Seleziona un file in formato GPX',
                 errorFileSize: 'La dimensione del file non può superare 16MB',
                 errorNoFile: 'Seleziona prima un file GPX',
                 errorUploadFailed: 'Caricamento fallito',
                 errorConversionFailed: 'Conversione fallita',
                 errorStatusFailed: 'Impossibile ottenere lo stato',
                 // Testo di stato
                 converting: 'Conversione in corso...',
                 preparing: 'Preparazione...',
                 conversionCompleteMsg: 'Conversione completata!',
                 startConvert: 'Inizia conversione',
                 errorGreetingFailed: 'Impossibile ottenere informazioni di saluto',
                 errorLocationFailed: 'Impossibile ottenere informazioni di posizione',
                 china: 'Cina',
                 // Traduzioni footer
                 enterpriseSecurity: 'Certificazione Sicurezza Aziendale',
                 privacyPolicy: 'Informativa Privacy',
                 termsOfService: 'Termini di Servizio',
                 securityInfo: 'Informazioni Sicurezza',
                 copyrightText: '© 2024 GPX a TCX Professionale',
                dataSecurityGuarantee: 'Garanzia Sicurezza Dati'
             },
             'ar': {
                 pageTitle: '🥷الفنون السرية - محول GPX إلى TCX - أداة احترافية لتحويل البيانات الرياضية',
                 welcomeTitle: 'اجري خارج حدود الخيال',
                 welcomeSubtitle: 'حول رحلتك إلى إمكانيات لا نهائية',
                 title: 'اجري خارج حدود الخيال',
                 subtitle: 'تحويل احترافي للبيانات الرياضية في أي وقت وأي مكان',
                 status: 'الحالة',
                 online: '● متصل',
                 format: 'التنسيق',
                 speed: 'السرعة',
                 developer: 'المطور',
                 weather: 'الطقس',
                 warning: '⚠️ للاختبار فقط، لا تستخدم في المسابقات الرسمية',
                 uploadText: 'اسحب ملفات GPX هنا',
                 uploadHint: 'يدعم تنسيق .gpx • حد أقصى 10 ميجابايت • معالجة فورية',
                 sportConfig: '🏃‍♂️ إعدادات الرياضة',
                 activityType: 'نوع النشاط',
                 running: 'الجري (عام)',
                 runningStreet: 'الجري على الطريق',
                 runningTrail: 'جري الطرق الوعرة',
                 runningTrack: 'الجري على المضمار',
                 runningTreadmill: 'جهاز المشي',
                 runningIndoor: 'الجري الداخلي',
                 cycling: 'ركوب الدراجات',
                 walking: 'المشي',
                 targetPace: 'الوتيرة المستهدفة (دقيقة:ثانية/كم)',
                 weight: 'الوزن (كجم)',
                 heartRate: '💓 معدل ضربات القلب والوقت',
                 baseHr: 'معدل ضربات القلب الأساسي',
                 maxHr: 'أقصى معدل ضربات قلب',
                 cadenceConfig: '🦵 الإيقاع والقوة',
                 baseCadence: 'الإيقاع الأساسي (عرض)',
                 maxCadence: 'أقصى إيقاع (عرض)',
                 powerConfig: '⚡ إعدادات القوة',
                 basePower: 'القوة الأساسية',
                 maxPower: 'أقصى قوة',
                 deviceInfo: '📱 الجهاز والتنسيق',
                 deviceName: 'اسم الجهاز',
                 deviceVersion: 'إصدار الجهاز',
                 timeConfig: '🕐 إعدادات الوقت',
                 startTime: 'وقت البداية المخصص (اختياري)',
                 caloriesPerKm: 'السعرات الحرارية/كم',
                 routePreview: '🗺️ معاينة المسار',
                 convertBtn: 'بدء التحويل',
                 initializing: 'جاري التهيئة...',
                 conversionComplete: 'اكتمل التحويل',
                 downloadTcx: 'تحميل ملف TCX',
                 reset: 'تحويل مرة أخرى',
                 coreFeatures: 'الميزات الأساسية',
                 instantProcessing: 'معالجة فورية',
                 instantDesc: 'خوارزميات متقدمة لتحويل GPX إلى TCX في أقل من ثانية',
                 precisionData: 'بيانات دقيقة',
                 precisionDesc: 'يحافظ على دقة المسار الأصلي وسلامة البيانات الكاملة',
                 privacyFirst: 'الخصوصية أولاً',
                 privacyDesc: 'المعالجة المحلية تضمن عدم مغادرة بيانات اللياقة البدنية لجهازك أبداً',
                 fileSelected: 'محدد',
                 fileSize: 'حجم الملف',
                 clickToSelect: 'انقر لتحديد ملف GPX أو اسحبه هنا',
                 maxFileSize: 'يدعم ملفات GPX حتى 16 ميجابايت',
                 universalAccess: 'وصول شامل',
                 universalDesc: 'توافق متعدد المنصات للتحويل السلس في أي مكان',
                 advancedConfig: 'تكوين متقدم',
                 advancedDesc: 'تخصيص كامل للمعاملات للرياضيين المحترفين',
                 smartLocation: 'موقع ذكي',
                 smartDesc: 'تكامل الطقس الذكي للحصول على رؤى تدريبية مخصصة',
                 routePreview: '🗺️ معاينة المسار',
                 totalDistance: 'المسافة الإجمالية',
                 trackPoints: 'نقاط المسار',
                 elevationGain: 'كسب الارتفاع',
                 routeDetails: '📍 تفاصيل المسار',
                 routeName: 'الاسم',
                 routeDesc: 'الوصف',
                 timeRange: 'نطاق الوقت',
                 avgSpeed: 'متوسط السرعة',
                 location: 'الموقع',
                 country: 'البلد',
                 province: 'المحافظة',
                 city: 'المدينة',
                 loadingLocation: 'جاري التحميل...',
                 locationError: 'فشل',
                 startPoint: 'نقطة البداية',
                 endPoint: 'نقطة النهاية',
                 unnamedTrack: 'مسار بدون اسم',
                 unknown: 'غير معروف',
                 // رسائل الخطأ
                 errorInvalidFile: 'حدد ملف بتنسيق GPX',
                 errorFileSize: 'لا يمكن أن يتجاوز حجم الملف 16 ميجابايت',
                 errorNoFile: 'حدد ملف GPX أولاً',
                 errorUploadFailed: 'فشل التحميل',
                 errorConversionFailed: 'فشل التحويل',
                 errorStatusFailed: 'تعذر الحصول على الحالة',
                 // نص الحالة
                 converting: 'جاري التحويل...',
                 preparing: 'جاري التحضير...',
                 conversionCompleteMsg: 'اكتمل التحويل!',
                 startConvert: 'بدء التحويل',
                 errorGreetingFailed: 'تعذر الحصول على معلومات التحية',
                 errorLocationFailed: 'تعذر الحصول على معلومات الموقع',
                 china: 'الصين',
                 // ترجمات التذييل
                 enterpriseSecurity: 'شهادة أمان المؤسسة',
                 privacyPolicy: 'سياسة الخصوصية',
                 termsOfService: 'شروط الخدمة',
                 securityInfo: 'معلومات الأمان',
                 copyrightText: '© 2024 GPX إلى TCX المهنية',
                 dataSecurityGuarantee: 'ضمان أمان البيانات'
             },
             'ru': {
                 title: 'Конвертер GPX в TCX',
                 welcome: 'Добро пожаловать в конвертер GPX в TCX',
                 status: 'Статус',
                 weather: 'Погода',
                 uploadText: 'Перетащите файл GPX сюда или нажмите для выбора',
                 uploadHint: 'Поддерживаются только файлы .gpx, максимум 16MB',
                 sportConfig: 'Настройки спорта',
                 heartRate: 'Частота пульса',
                 cadenceConfig: 'Настройки каденса',
                 powerConfig: 'Настройки мощности',
                 deviceInfo: 'Информация об устройстве',
                 timeConfig: 'Настройки времени',
                 coreFeatures: 'Основные функции',
                 instantProcessing: 'Мгновенная обработка',
                 instantDesc: 'Быстрое преобразование файлов с сохранением точности данных',
                 precisionData: 'Точные данные',
                 precisionDesc: 'Продвинутый алгоритм обеспечивает точность спортивных данных',
                 privacyFirst: 'Конфиденциальность прежде всего',
                 privacyDesc: 'Все операции локальные, ваши данные не сохраняются',
                 fileSelected: 'Выбрано',
                 fileSize: 'Размер файла',
                 clickToSelect: 'Нажмите для выбора файла GPX или перетащите его сюда',
                 maxFileSize: 'Поддерживает файлы GPX до 16 МБ',
                 universalAccess: 'Универсальный доступ',
                 universalDesc: 'Кроссплатформенная совместимость для бесшовного преобразования где угодно',
                 advancedConfig: 'Расширенная конфигурация',
                 advancedDesc: 'Полная настройка параметров для профессиональных спортсменов',
                 smartLocation: 'Умное местоположение',
                 smartDesc: 'Интеграция умной погоды для персонализированных тренировочных инсайтов',
                 routePreview: '🗺️ Предварительный просмотр маршрута',
                 totalDistance: 'Общее расстояние',
                 trackPoints: 'Точки трека',
                 elevationGain: 'Набор высоты',
                 routeDetails: '📍 Детали маршрута',
                 routeName: 'Название',
                 routeDesc: 'Описание',
                 timeRange: 'Временной диапазон',
                 avgSpeed: 'Средняя скорость',
                 location: 'Местоположение',
                 country: 'Страна',
                 province: 'Область',
                 city: 'Город',
                 loadingLocation: 'Загрузка...',
                 locationError: 'Ошибка',
                 startPoint: 'Начальная точка',
                 endPoint: 'Конечная точка',
                 unnamedTrack: 'Безымянный трек',
                 unknown: 'Неизвестно',
                 errorInvalidFile: 'Выберите файл в формате GPX',
                 errorFileSize: 'Размер файла не может превышать 16 МБ',
                 errorNoFile: 'Сначала выберите файл GPX',
                 errorUploadFailed: 'Ошибка загрузки',
                 errorConversionFailed: 'Ошибка конвертации',
                 errorStatusFailed: 'Не удалось получить статус',
                 converting: 'Конвертация...',
                 preparing: 'Подготовка...',
                 conversionCompleteMsg: 'Конвертация завершена!',
                 startConvert: 'Начать конвертацию',
                 errorGreetingFailed: 'Не удалось получить информацию о приветствии',
                 errorLocationFailed: 'Не удалось получить информацию о местоположении',
                 china: 'Китай',
                 enterpriseSecurity: 'Корпоративная безопасность',
                 privacyPolicy: 'Политика конфиденциальности',
                 termsOfService: 'Условия обслуживания',
                 securityInfo: 'Информация о безопасности',
                 copyrightText: '© 2024 Профессиональный GPX в TCX',
                 dataSecurityGuarantee: 'Гарантия безопасности данных',
                 running: 'Бег (Общий)',
                 runningStreet: 'Уличный бег',
                 runningTrail: 'Трейл-бег',
                 runningTrack: 'Бег по дорожке',
                 runningTreadmill: 'Беговая дорожка',
                 runningIndoor: 'Бег в помещении',
                 cycling: 'Велоспорт',
                 walking: 'Ходьба',
                 convertBtn: 'Конвертировать в TCX',
                 downloadTcx: 'Скачать файл TCX',
                 reset: 'Сброс',
                 error: 'Ошибка',
                 success: 'Успешно',
                 processing: 'Обработка',
                 completed: 'Завершено',
                 failed: 'Неудачно',
                 uploadFailed: 'Ошибка загрузки',
                 conversionFailed: 'Ошибка конвертации',
                 downloadFailed: 'Ошибка скачивания',
                 fileTooBig: 'Файл слишком большой',
                 invalidFile: 'Недопустимый файл',
                 networkError: 'Ошибка сети',
                 serverError: 'Ошибка сервера',
                 unknownError: 'Неизвестная ошибка',
                 footer: '© 2025 Конвертер GPX в TCX. Все права защищены.'
             }
        };

        // 语言检测和管理
        let currentLang = 'zh';
        
        function detectLanguage() {
            // 检查本地存储的语言设置
            const savedLang = localStorage.getItem('preferred-language');
            if (savedLang && translations[savedLang]) {
                return savedLang;
            }
            
            // 检测浏览器语言
            const browserLang = navigator.language || navigator.userLanguage;
            const langCode = browserLang.split('-')[0].toLowerCase();
            
            // 支持的语言映射
            const supportedLangs = {
                'zh': 'zh',
                'zh-tw': 'zh-tw',
                'zh-hk': 'zh-tw',
                'zh-mo': 'zh-tw',
                'en': 'en', 
                'ja': 'ja',
                'ko': 'ko',
                'fr': 'fr',
                'de': 'de',
                'es': 'es',
                'pt': 'pt',
                'it': 'it',
                'ar': 'ar',
                'ru': 'ru'
            };
            
            // 检查完整语言代码（包含地区）
            if (supportedLangs[browserLang.toLowerCase()]) {
                return supportedLangs[browserLang.toLowerCase()];
            }
            
            return supportedLangs[langCode] || 'zh';
        }
        
        function switchLanguage(lang) {
            if (translations[lang]) {
                currentLang = lang;
                localStorage.setItem('preferred-language', lang);
                applyTranslations(lang);
                updateLanguageSelector(lang);
                
                // 设置文档方向（RTL支持）
                if (lang === 'ar') {
                    document.documentElement.setAttribute('dir', 'rtl');
                } else {
                    document.documentElement.setAttribute('dir', 'ltr');
                }
                
                // 重新加载天气信息以应用新语言
                loadGreeting();
            }
        }
        
        function updateLanguageSelector(lang) {
            const selector = document.getElementById('languageSelector');
            if (selector) {
                selector.value = lang;
            }
        }

        // 应用翻译
        function applyTranslations(lang) {
            const t = translations[lang] || translations['zh'];
            if (!t) return;

            // 更新页面标题
            document.title = t.pageTitle;
            document.documentElement.lang = lang === 'zh' ? 'zh-CN' : 'en';

            // 更新页面内容
            document.querySelector('.welcome-title').textContent = t.title;
            document.querySelector('.welcome-subtitle').textContent = t.subtitle;
            
            // 更新信息项
            const infoItems = document.querySelectorAll('.info-item');
            if (infoItems[0]) {
                infoItems[0].querySelector('.info-label').textContent = t.format;
            }
            if (infoItems[1]) {
                infoItems[1].querySelector('.info-label').textContent = t.developer;
            }
            // 更新天气信息标签
            if (infoItems[2]) {
                infoItems[2].querySelector('.info-label').textContent = t.weather + ':';
            }

            // 更新警告信息
            document.querySelector('.status-warning').textContent = t.warning;

            // 更新上传区域
            document.querySelector('.upload-text').textContent = t.uploadText;
            document.querySelector('.upload-hint').textContent = t.uploadHint;

            // 更新配置区域
            const configTitles = document.querySelectorAll('.config-group h3');
            if (configTitles[0]) configTitles[0].textContent = t.sportConfig;
            if (configTitles[1]) configTitles[1].textContent = t.heartRate;
            if (configTitles[2]) configTitles[2].textContent = t.cadenceConfig;
            if (configTitles[3]) configTitles[3].textContent = t.powerConfig;
            if (configTitles[4]) configTitles[4].textContent = t.deviceInfo;
            if (configTitles[5]) configTitles[5].textContent = t.timeConfig;

            // 使用data-translate属性更新所有翻译元素
            const elementsWithTranslate = document.querySelectorAll('[data-translate]');
            elementsWithTranslate.forEach(element => {
                const key = element.getAttribute('data-translate');
                if (t[key]) {
                    element.textContent = t[key];
                }
            });

            // 更新选项
            const options = document.querySelectorAll('option');
            options.forEach(option => {
                if (option.value === 'Running') option.textContent = t.running;
                if (option.value === 'Running_Street') option.textContent = t.runningStreet;
                if (option.value === 'Running_Trail') option.textContent = t.runningTrail;
                if (option.value === 'Running_Track') option.textContent = t.runningTrack;
                if (option.value === 'Running_Treadmill') option.textContent = t.runningTreadmill;
                if (option.value === 'Running_Indoor') option.textContent = t.runningIndoor;
                if (option.value === 'Cycling') option.textContent = t.cycling;
                if (option.value === 'Walking') option.textContent = t.walking;
            });

            // 更新按钮
            document.querySelector('#convertBtn .btn-text').textContent = t.convertBtn;
            document.querySelector('#downloadBtn .btn-text').textContent = t.downloadTcx;
            document.querySelector('#resetBtn .btn-text').textContent = t.reset;

            // 更新功能区域
            document.querySelector('.features h3').textContent = t.coreFeatures;
            const featureTitles = document.querySelectorAll('.feature-title');
            const featureDescs = document.querySelectorAll('.feature-desc');
            
            if (featureTitles[0]) featureTitles[0].textContent = t.instantProcessing;
            if (featureDescs[0]) featureDescs[0].textContent = t.instantDesc;
            if (featureTitles[1]) featureTitles[1].textContent = t.precisionData;
            if (featureDescs[1]) featureDescs[1].textContent = t.precisionDesc;
            if (featureTitles[2]) featureTitles[2].textContent = t.privacyFirst;
            if (featureDescs[2]) featureDescs[2].textContent = t.privacyDesc;
            if (featureTitles[3]) featureTitles[3].textContent = t.universalAccess;
            if (featureDescs[3]) featureDescs[3].textContent = t.universalDesc;
            if (featureTitles[4]) featureTitles[4].textContent = t.advancedConfig;
            if (featureDescs[4]) featureDescs[4].textContent = t.advancedDesc;
            if (featureTitles[5]) featureTitles[5].textContent = t.smartLocation;
            if (featureDescs[5]) featureDescs[5].textContent = t.smartDesc;

            // 更新进度和结果文本
            const progressText = document.getElementById('progressText');
            const resultMessage = document.getElementById('resultMessage');
            if (progressText && (progressText.textContent.includes('INITIALIZING') || progressText.textContent.includes('正在初始化'))) {
                progressText.textContent = t.initializing;
            }
            if (resultMessage && (resultMessage.textContent.includes('CONVERSION') || resultMessage.textContent.includes('转换完成'))) {
                resultMessage.textContent = t.conversionComplete;
            }
        }

        // 获取当前语言的翻译
        function getTranslation(key) {
            return translations[currentLang][key] || key;
        }

        // 语言初始化已移至DOMContentLoaded事件中

        let selectedFile = null;
        let currentTaskId = null;

        // 文件上传处理
        const fileUpload = document.getElementById('fileUpload');
        const fileInput = document.getElementById('fileInput');
        const convertBtn = document.getElementById('convertBtn');
        const errorMessage = document.getElementById('errorMessage');
        const progressSection = document.getElementById('progressSection');
        const resultSection = document.getElementById('resultSection');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');
        const downloadBtn = document.getElementById('downloadBtn');
        const resetBtn = document.getElementById('resetBtn');

        // 数字递增动画
        function animateCounter(element, start, end, duration = 1000) {
            const startTime = performance.now();
            const range = end - start;
            
            function updateCounter(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // 使用缓动函数
                const easeOutQuart = 1 - Math.pow(1 - progress, 4);
                const current = Math.round(start + (range * easeOutQuart));
                
                element.textContent = current < 1 ? '< 1s' : current + 's';
                
                if (progress < 1) {
                    requestAnimationFrame(updateCounter);
                }
            }
            
            requestAnimationFrame(updateCounter);
        }

        // 页面加载完成后启动动画
        document.addEventListener('DOMContentLoaded', () => {
            // 首先初始化语言设置
            currentLang = detectLanguage();
            applyTranslations(currentLang);
            updateLanguageSelector(currentLang);
            
            // 数字递增动画
            const counterElement = document.querySelector('.counter');
            if (counterElement) {
                setTimeout(() => {
                    animateCounter(counterElement, 5, 0, 2000);
                }, 1000);
            }
            
            // 添加微光呼吸效果到上传区域
            const uploadArea = document.querySelector('.file-upload');
            if (uploadArea) {
                uploadArea.style.animation = 'breathe 3s ease-in-out infinite';
            }
            
            // 初始化定位按钮状态（默认GPS定位）
            const locationIcon = document.getElementById('locationIcon');
            const locationToggle = document.getElementById('locationToggle');
            if (locationIcon && locationToggle) {
                locationIcon.textContent = '📍';
                locationToggle.title = '使用GPS定位 (点击切换到IP定位)';
            }
        });

        // 添加按钮涟漪效果
        function addRippleEffect(button, event) {
            const ripple = button.querySelector('.btn-ripple');
            if (!ripple) return;
            
            const rect = button.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            const x = event.clientX - rect.left - size / 2;
            const y = event.clientY - rect.top - size / 2;
            
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            ripple.classList.add('ripple-active');
            
            setTimeout(() => {
                ripple.classList.remove('ripple-active');
            }, 600);
        }

        // 为所有按钮添加涟漪效果
        document.addEventListener('click', (event) => {
            if (event.target.closest('.btn')) {
                addRippleEffect(event.target.closest('.btn'), event);
            }
        });

        // 点击上传区域
        fileUpload.addEventListener('click', () => {
            fileInput.click();
        });

        // 文件选择
        fileInput.addEventListener('change', handleFileSelect);

        // 拖拽处理
        fileUpload.addEventListener('dragover', (e) => {
            e.preventDefault();
            fileUpload.classList.add('dragover');
        });

        fileUpload.addEventListener('dragleave', () => {
            fileUpload.classList.remove('dragover');
        });

        fileUpload.addEventListener('drop', (e) => {
            e.preventDefault();
            fileUpload.classList.remove('dragover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                handleFile(files[0]);
            }
        });

        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (file) {
                handleFile(file);
            }
        }

        function handleFile(file) {
            // 检查文件类型
            if (!file.name.toLowerCase().endsWith('.gpx')) {
                showError(translations[currentLang].errorInvalidFile);
                return;
            }

            // 检查文件大小 (16MB)
            if (file.size > 16 * 1024 * 1024) {
                showError(translations[currentLang].errorFileSize);
                return;
            }

            selectedFile = file;
            updateUploadUI();
            fileUpload.classList.add('file-selected');
            convertBtn.disabled = false;
            convertBtn.classList.add('btn-ready');
            hideError();
            
            // 添加GPX预览功能
            parseAndDisplayGPX(file);
        }

        function updateUploadUI() {
            if (selectedFile) {
                fileUpload.innerHTML = `
                    <div class="upload-icon">✅</div>
                    <div class="upload-text">${translations[currentLang].fileSelected}: ${selectedFile.name}</div>
                    <div class="upload-hint">${translations[currentLang].fileSize}: ${(selectedFile.size / 1024 / 1024).toFixed(2)} MB</div>
                `;
            }
        }

        // 转换按钮
        convertBtn.addEventListener('click', startConversion);
        resetBtn.addEventListener('click', resetConversion);

        async function startConversion() {
            if (convertBtn.disabled) {
                return;
            }
            
            if (!selectedFile) {
                showError(translations[currentLang].errorNoFile);
                return;
            }

            // 准备表单数据
            const formData = new FormData();
            formData.append('file', selectedFile);

            // 添加配置数据
            const configForm = document.getElementById('configForm');
            const formElements = configForm.elements;
            for (let element of formElements) {
                if (element.name && element.value) {
                    formData.append(element.name, element.value);
                }
            }

            try {
                convertBtn.disabled = true;
                convertBtn.classList.add('btn-loading');
                convertBtn.querySelector('.btn-text').textContent = translations[currentLang].converting;
                convertBtn.querySelector('.btn-icon').textContent = '⏳';
                hideError();
                resultSection.style.display = 'none';

                const response = await fetch('/upload', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();

                if (response.ok) {
                    currentTaskId = result.task_id;
                    showProgress();
                    pollStatus();
                } else {
                    throw new Error(result.error || translations[currentLang].errorUploadFailed);
                }
            } catch (error) {
                showError(error.message);
                resetUI();
            }
        }

        function resetConversion() {
            selectedFile = null;
            currentTaskId = null;
            
            // 重置文件上传区域
            fileUpload.innerHTML = `
                <div class="upload-icon">📁</div>
                <div class="upload-text">${translations[currentLang].clickToSelect}</div>
                <div class="upload-hint">${translations[currentLang].maxFileSize}</div>
            `;
            fileUpload.classList.remove('file-selected');
            
            // 隐藏GPX预览区域
            const gpxPreview = document.getElementById('gpxPreview');
            if (gpxPreview) {
                gpxPreview.style.display = 'none';
            }
            
            // 清理地图实例
            if (gpxMap) {
                gpxMap.remove();
                gpxMap = null;
            }
            
            // 重置按钮状态
            convertBtn.disabled = true;
            convertBtn.classList.remove('btn-ready', 'btn-loading');
            convertBtn.querySelector('.btn-text').textContent = translations[currentLang].startConvert;
            convertBtn.querySelector('.btn-icon').textContent = '🔄';
            
            // 隐藏进度和结果
            progressSection.style.display = 'none';
            resultSection.style.display = 'none';
            hideError();
        }

        function showProgress() {
            progressSection.style.display = 'block';
            progressSection.classList.add('fade-in');
            progressFill.style.width = '0%';
            progressText.textContent = translations[currentLang].preparing;
        }

        async function pollStatus() {
            if (!currentTaskId) return;

            try {
                const response = await fetch(`/status/${currentTaskId}`);
                const status = await response.json();

                if (response.ok) {
                    updateProgress(status.progress, status.message);

                    if (status.status === 'completed') {
                        showSuccess();
                    } else if (status.status === 'error') {
                        throw new Error(status.error || translations[currentLang].errorConversionFailed);
                    } else {
                        // 继续轮询
                        setTimeout(pollStatus, 1000);
                    }
                } else {
                    throw new Error(status.error || translations[currentLang].errorStatusFailed);
                }
            } catch (error) {
                showError(error.message);
                resetUI();
            }
        }

        function updateProgress(progress, message) {
            progressFill.style.width = progress + '%';
            progressText.textContent = message;
            
            // 添加进度动画
            if (progress > 0) {
                progressFill.classList.add('progress-active');
            }
        }

        function showSuccess() {
            progressSection.style.display = 'none';
            resultSection.style.display = 'block';
            resultSection.classList.add('fade-in');
            
            const resultIcon = document.getElementById('resultIcon');
            const resultMessage = document.getElementById('resultMessage');
            
            resultIcon.textContent = '✅';
            resultIcon.classList.add('success-bounce');
            resultMessage.textContent = translations[currentLang].conversionCompleteMsg;
            
            // 正确设置下载按钮的点击事件
            downloadBtn.onclick = () => {
                window.location.href = `/download/${currentTaskId}`;
            };
            resetUI();
        }

        function resetUI() {
            convertBtn.disabled = false;
            convertBtn.classList.remove('btn-loading');
            convertBtn.querySelector('.btn-text').textContent = translations[currentLang].startConvert;
            convertBtn.querySelector('.btn-icon').textContent = '🔄';
        }

        function showError(message) {
            errorMessage.textContent = message;
            errorMessage.style.display = 'block';
            errorMessage.classList.add('shake');
            
            setTimeout(() => {
                errorMessage.classList.remove('shake');
            }, 600);
        }

        function hideError() {
            errorMessage.style.display = 'none';
            errorMessage.classList.remove('shake');
        }

        // 步频显示值转换函数
        function updateCadenceValue(type) {
            if (type === 'base') {
                const displayValue = document.getElementById('baseCadenceDisplay').value;
                const actualValue = Math.round(displayValue / 2);
                document.getElementById('baseCadence').value = actualValue;
            } else if (type === 'max') {
                const displayValue = document.getElementById('maxCadenceDisplay').value;
                const actualValue = Math.round(displayValue / 2);
                document.getElementById('maxCadence').value = actualValue;
            }
        }

        // 数字输入框调整函数
        function adjustNumber(inputId, delta) {
            const input = document.getElementById(inputId);
            if (!input) return;
            
            const currentValue = parseFloat(input.value) || 0;
            const min = parseFloat(input.min) || -Infinity;
            const max = parseFloat(input.max) || Infinity;
            
            let newValue = currentValue + delta;
            newValue = Math.max(min, Math.min(max, newValue));
            
            input.value = newValue;
            
            // 触发change事件以确保其他逻辑正常工作
            input.dispatchEvent(new Event('change', { bubbles: true }));
        }

        // 步频调整函数
        function adjustCadence(inputId, delta) {
            const input = document.getElementById(inputId);
            if (!input) return;
            
            const currentValue = parseFloat(input.value) || 0;
            const min = parseFloat(input.min) || 60;
            const max = parseFloat(input.max) || 240;
            
            let newValue = currentValue + delta;
            newValue = Math.max(min, Math.min(max, newValue));
            
            input.value = newValue;
            
            // 触发change事件以更新隐藏的实际值
            input.dispatchEvent(new Event('change', { bubbles: true }));
        }

        // 初始化步频值
        updateCadenceValue('base');
        updateCadenceValue('max');

        // 设置默认开始时间为当前时间
        const now = new Date();
        // 格式化为本地时间字符串 (YYYY-MM-DDTHH:MM)
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const localTimeString = `${year}-${month}-${day}T${hours}:${minutes}`;
        document.getElementById('startTime').value = localTimeString;

        // 个性化问候功能
         const weatherInline = document.getElementById('weatherInline');
         const weatherSummary = document.getElementById('weatherSummary');
         const greetingError = document.getElementById('greetingError');
         
         // 定位方式状态管理
         let useGPSLocation = true; // 默认使用GPS定位
         let currentPosition = null;

         // 刷新定位和天气信息
         async function refreshLocationAndWeather() {
             const locationIcon = document.getElementById('locationIcon');
             const locationToggle = document.getElementById('locationToggle');
             
             // 显示刷新动画
             locationIcon.textContent = '⏳';
             locationToggle.title = '正在刷新...';
             locationToggle.disabled = true;
             
             try {
                 // 清除当前位置缓存，强制重新获取
                 currentPosition = null;
                 
                 // 重新加载天气信息（强制刷新）
                 await loadGreeting(true);
                 
                 // 刷新成功，显示成功图标
                 locationIcon.textContent = '✅';
                 locationToggle.title = '刷新成功！';
                 
                 // 2秒后恢复刷新图标
                 setTimeout(() => {
                     locationIcon.textContent = '🔄';
                     locationToggle.title = '刷新定位和天气信息';
                     locationToggle.disabled = false;
                 }, 2000);
                 
             } catch (error) {
                 console.error('刷新失败:', error);
                 
                 // 显示错误图标
                 locationIcon.textContent = '❌';
                 locationToggle.title = '刷新失败，请重试';
                 
                 // 3秒后恢复刷新图标
                 setTimeout(() => {
                     locationIcon.textContent = '🔄';
                     locationToggle.title = '刷新定位和天气信息';
                     locationToggle.disabled = false;
                 }, 3000);
             }
         }

         // 获取GPS位置
         function getCurrentPosition(forceRefresh = false) {
             return new Promise((resolve, reject) => {
                 if (!navigator.geolocation) {
                     reject(new Error('浏览器不支持GPS定位'));
                     return;
                 }
                 
                 navigator.geolocation.getCurrentPosition(
                     (position) => {
                         resolve({
                             latitude: position.coords.latitude,
                             longitude: position.coords.longitude,
                             accuracy: position.coords.accuracy
                         });
                     },
                     (error) => {
                         let errorMessage = '获取GPS位置失败';
                         switch(error.code) {
                             case error.PERMISSION_DENIED:
                                 errorMessage = '用户拒绝了GPS定位请求';
                                 break;
                             case error.POSITION_UNAVAILABLE:
                                 errorMessage = 'GPS位置信息不可用';
                                 break;
                             case error.TIMEOUT:
                                 errorMessage = 'GPS定位请求超时';
                                 break;
                         }
                         reject(new Error(errorMessage));
                     },
                     {
                         enableHighAccuracy: true,
                         timeout: 10000,
                         maximumAge: forceRefresh ? 0 : 300000 // 强制刷新时不使用缓存，否则5分钟缓存
                     }
                 );
             });
         }

         // 响应式天气信息格式化
         function formatWeatherText(weather, location, locationSource) {
             const isMobile = window.innerWidth <= 768;
             let weatherText;
             
             if (isMobile) {
                 // 移动端使用更紧凑的格式
                 weatherText = `${locationSource} ${weather.temperature} ${weather.description}`;
                 // 如果城市名称较短，添加城市信息
                 if (location.city && location.city.length <= 8) {
                     weatherText += ` · ${location.city}`;
                 }
             } else {
                 // 桌面端使用完整格式
                 weatherText = `${locationSource} ${weather.temperature} | ${weather.description} | ${location.city}`;
             }
             
             return weatherText;
         }
         
         // 存储当前天气数据用于响应式更新
         let currentWeatherData = null;
         
         // 窗口大小变化时重新格式化天气信息
         window.addEventListener('resize', function() {
             if (currentWeatherData && weatherSummary) {
                 const { weather, location, locationSource } = currentWeatherData;
                 weatherSummary.textContent = formatWeatherText(weather, location, locationSource);
             }
         });

         // 页面加载时自动获取天气信息
         async function loadGreeting(forceRefresh = false) {
             try {
                 if (weatherInline) weatherInline.style.display = 'none';
                 if (greetingError) greetingError.style.display = 'none';

                 let requestUrl = `/greeting-info?lang=${currentLang}`;
                 
                 // 如果使用GPS定位，先获取GPS坐标
                 if (useGPSLocation) {
                     try {
                         const position = await getCurrentPosition(forceRefresh);
                         currentPosition = position;
                         requestUrl += `&lat=${position.latitude}&lng=${position.longitude}&gps=true`;
                     } catch (gpsError) {
                         // GPS获取失败，显示错误并回退到IP定位
                         if (greetingError) {
                             greetingError.textContent = `GPS定位失败: ${gpsError.message}，已切换到IP定位`;
                             greetingError.style.display = 'block';
                             greetingError.classList.add('shake');
                             
                             setTimeout(() => {
                                 greetingError.classList.remove('shake');
                                 greetingError.style.display = 'none';
                             }, 3000);
                         }
                         
                         // 自动切换回IP定位
                         useGPSLocation = false;
                         const locationIcon = document.getElementById('locationIcon');
                         const locationToggle = document.getElementById('locationToggle');
                         locationIcon.textContent = '🌐';
                         locationToggle.title = '使用IP定位 (点击切换到GPS定位)';
                     }
                 }

                 const response = await fetch(requestUrl);
                 const data = await response.json();
 
                 if (data.success) {
                     console.log('问候语API调用成功，但已移除问候语显示功能');
                     
                     // 显示天气信息（仅当天气数据可用时）
                     if (data.data.weather && weatherInline && weatherSummary) {
                         const weather = data.data.weather;
                         const location = data.data.location;
                         
                         // 创建简洁的天气摘要，包含定位方式标识
                         const locationSource = useGPSLocation && currentPosition ? '📍' : '🌐';
                         
                         // 存储天气数据用于响应式更新
                         currentWeatherData = { weather, location, locationSource };
                         
                         // 使用响应式格式化函数
                         const weatherText = formatWeatherText(weather, location, locationSource);
                         weatherSummary.textContent = weatherText;
                         
                         weatherInline.style.display = 'flex';
                         weatherInline.classList.add('slideIn');
                     }
                 } else {
                     throw new Error(data.error || translations[currentLang].errorGreetingFailed);
                 }
             } catch (error) {
                 console.error('问候语API调用失败:', error);
             }
         }
 
         // 页面加载完成后自动执行
         // 确保使用当前语言设置
         setTimeout(() => {
             loadGreeting();
         }, 100);
    </script>
    
    <!-- Leaflet地图库JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    
    <!-- GPX路径可视化功能 -->
    <script>
        let gpxMap = null;
        let gpxLayer = null;
        
        // GPX解析和地图显示功能
        function parseAndDisplayGPX(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const gpxContent = e.target.result;
                try {
                    const parser = new DOMParser();
                    const gpxDoc = parser.parseFromString(gpxContent, 'text/xml');
                    
                    // 提取轨迹点
                    const trackPoints = extractTrackPoints(gpxDoc);
                    if (trackPoints.length > 0) {
                        displayGPXOnMap(trackPoints, gpxDoc);
                        showRouteInfo(trackPoints, gpxDoc);
                    }
                } catch (error) {
                    console.error('GPX解析错误:', error);
                }
            };
            reader.readAsText(file);
        }
        
        // 提取GPX轨迹点
        function extractTrackPoints(gpxDoc) {
            const points = [];
            const trkpts = gpxDoc.querySelectorAll('trkpt');
            
            trkpts.forEach(point => {
                const lat = parseFloat(point.getAttribute('lat'));
                const lon = parseFloat(point.getAttribute('lon'));
                const eleElement = point.querySelector('ele');
                const timeElement = point.querySelector('time');
                
                if (!isNaN(lat) && !isNaN(lon)) {
                    points.push({
                        lat: lat,
                        lng: lon,
                        elevation: eleElement ? parseFloat(eleElement.textContent) : null,
                        time: timeElement ? new Date(timeElement.textContent) : null
                    });
                }
            });
            
            return points;
        }
        
        // 在地图上显示GPX路径
          function displayGPXOnMap(trackPoints, gpxDoc) {
              const previewDiv = document.getElementById('gpxPreview');
              const translation = translations[currentLang];
              previewDiv.style.display = 'block';
              
              // 更新预览标题
              const previewHeader = previewDiv.querySelector('.preview-header h4');
              if (previewHeader) {
                  previewHeader.textContent = translation.routePreview;
              }
            
            // 初始化地图
            if (gpxMap) {
                gpxMap.remove();
            }
            
            gpxMap = L.map('gpxMap').setView([trackPoints[0].lat, trackPoints[0].lng], 13);
            
            // 添加地图图层
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors'
            }).addTo(gpxMap);
            
            // 创建路径
            const latlngs = trackPoints.map(point => [point.lat, point.lng]);
            gpxLayer = L.polyline(latlngs, {
                color: '#007AFF',
                weight: 4,
                opacity: 0.8
            }).addTo(gpxMap);
            
            // 添加起点和终点标记
            const startPoint = trackPoints[0];
            const endPoint = trackPoints[trackPoints.length - 1];
            
             L.marker([startPoint.lat, startPoint.lng], {
                 icon: L.divIcon({
                     html: '🏁',
                     className: 'start-marker',
                     iconSize: [20, 20]
                 })
             }).addTo(gpxMap).bindPopup(translation.startPoint);
             
             L.marker([endPoint.lat, endPoint.lng], {
                 icon: L.divIcon({
                     html: '🏆',
                     className: 'end-marker',
                     iconSize: [20, 20]
                 })
             }).addTo(gpxMap).bindPopup(translation.endPoint);
            
            // 调整地图视图以适应路径
            gpxMap.fitBounds(gpxLayer.getBounds(), { padding: [20, 20] });
        }
        
        // 显示路径信息
         function showRouteInfo(trackPoints, gpxDoc) {
             const stats = calculateRouteStats(trackPoints);
             const routeStatsDiv = document.getElementById('routeStats');
             const routeInfoDiv = document.getElementById('routeInfo');
             const trans = translations[currentLang];
             
             // 显示统计信息
             routeStatsDiv.innerHTML = `
                 <div class="stat-item">
                     <span class="stat-label">${trans.totalDistance}</span>
                     <span class="stat-value">${stats.distance.toFixed(2)} km</span>
                 </div>
                 <div class="stat-item">
                     <span class="stat-label">${trans.trackPoints}</span>
                     <span class="stat-value">${stats.points}</span>
                 </div>
                 <div class="stat-item">
                     <span class="stat-label">${trans.elevationGain}</span>
                     <span class="stat-value">${stats.elevationGain.toFixed(0)} m</span>
                 </div>
                 <div class="stat-item location-info">
                     <span class="stat-label">${trans.country}</span>
                     <span class="stat-value" id="location-country">${trans.loadingLocation}</span>
                 </div>
                 <div class="stat-item location-info">
                     <span class="stat-label">${trans.province}</span>
                     <span class="stat-value" id="location-province">${trans.loadingLocation}</span>
                 </div>
                 <div class="stat-item location-info">
                     <span class="stat-label">${trans.city}</span>
                     <span class="stat-value" id="location-city">${trans.loadingLocation}</span>
                 </div>
             `;
             
             // 显示详细信息
             const trackName = gpxDoc.querySelector('name')?.textContent || trans.unnamedTrack;
             const trackDesc = gpxDoc.querySelector('desc')?.textContent || '';
             
             routeInfoDiv.innerHTML = `
                 <div class="route-details">
                     <h5>${trans.routeDetails}</h5>
                     <p><strong>${trans.routeName}:</strong> ${trackName}</p>
                     ${trackDesc ? `<p><strong>${trans.routeDesc}:</strong> ${trackDesc}</p>` : ''}
                     <p><strong>${trans.timeRange}:</strong> ${stats.timeRange}</p>
                     <p><strong>${trans.avgSpeed}:</strong> ${stats.avgSpeed.toFixed(1)} km/h</p>
                 </div>
             `;
             
             // 获取地理位置信息
             if (trackPoints.length > 0) {
                 getLocationInfo(trackPoints[0].lat, trackPoints[0].lng);
             }
         }
        
        // 计算路径统计信息
        function calculateRouteStats(trackPoints) {
            let totalDistance = 0;
            let elevationGain = 0;
            let minTime = null;
            let maxTime = null;
            
            for (let i = 1; i < trackPoints.length; i++) {
                const prev = trackPoints[i - 1];
                const curr = trackPoints[i];
                
                // 计算距离
                const distance = calculateDistance(prev.lat, prev.lng, curr.lat, curr.lng);
                totalDistance += distance;
                
                // 计算海拔增益
                if (prev.elevation !== null && curr.elevation !== null) {
                    const elevDiff = curr.elevation - prev.elevation;
                    if (elevDiff > 0) {
                        elevationGain += elevDiff;
                    }
                }
                
                // 记录时间范围
                if (curr.time) {
                    if (!minTime || curr.time < minTime) minTime = curr.time;
                    if (!maxTime || curr.time > maxTime) maxTime = curr.time;
                }
            }
            
            // 计算平均速度
            let avgSpeed = 0;
            if (minTime && maxTime) {
                const timeHours = (maxTime - minTime) / (1000 * 60 * 60);
                avgSpeed = timeHours > 0 ? totalDistance / timeHours : 0;
            }
            
            const timeRange = minTime && maxTime ? 
                `${minTime.toLocaleString()} - ${maxTime.toLocaleString()}` : translations[currentLang].unknown;
            
            return {
                distance: totalDistance,
                points: trackPoints.length,
                elevationGain: elevationGain,
                timeRange: timeRange,
                avgSpeed: avgSpeed
            };
        }
        
        // 计算两点间距离（Haversine公式）
        function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371; // 地球半径（公里）
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                    Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }
        
        // 获取地理位置信息（反向地理编码）
        async function getLocationInfo(lat, lng) {
            const countryElement = document.getElementById('location-country');
            const provinceElement = document.getElementById('location-province');
            const cityElement = document.getElementById('location-city');
            const trans = translations[currentLang];
            
            // 输入验证
            if (!lat || !lng || isNaN(lat) || isNaN(lng) || 
                lat < -90 || lat > 90 || lng < -180 || lng > 180) {
                console.error('无效的坐标:', lat, lng);
                // 初始错误时隐藏所有地区信息
                    countryElement.parentElement.style.display = 'none';
                    provinceElement.parentElement.style.display = 'none';
                    cityElement.parentElement.style.display = 'none';
                return;
            }
            
            // 重试机制
            const maxRetries = 2;
            let retryCount = 0;
            
            while (retryCount <= maxRetries) {
                try {
                    // 根据当前语言设置API语言参数
                    const langMap = {
                        'zh': 'zh-CN,zh',
                        'en': 'en',
                        'ja': 'ja',
                        'ko': 'ko',
                        'fr': 'fr',
                        'de': 'de',
                        'es': 'es',
                        'pt': 'pt',
                        'zh-tw': 'zh-TW,zh'
                    };
                    const acceptLang = langMap[currentLang] || 'en';
                    
                    // 使用Nominatim API进行反向地理编码，添加超时控制
                    const controller = new AbortController();
                    const timeoutId = setTimeout(() => controller.abort(), 8000); // 8秒超时
                    
                    const response = await fetch(
                        `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}&accept-language=${acceptLang}`,
                        { 
                            signal: controller.signal,
                            headers: {
                                'User-Agent': 'GPX-TCX-Converter/1.0'
                            }
                        }
                    );
                    
                    clearTimeout(timeoutId);
                    
                    if (!response.ok) {
                        if (response.status === 429) {
                            throw new Error('API请求频率限制，请稍后重试');
                        }
                        throw new Error(`API请求失败: ${response.status}`);
                    }
                    
                    const data = await response.json();
                
                if (data && data.address) {
                    const address = data.address;
                    
                    // 提取国家信息
                    const country = address.country || trans.locationError;
                    
                    // 提取省份信息 - 针对中国地址优化
                    let province;
                    if (address.country === translations[currentLang].china || address.country === 'China') {
                        // 对于中国地址，按照行政层级提取省份信息
                        // 优先级：省/直辖市/自治区 > 地级市 > 其他
                        const provinceOptions = [
                            address.state,          // 省/直辖市/自治区
                            address.province,       // 省份
                            address.region,         // 地区/区域
                            address.municipality,   // 直辖市（备选）
                            address.county          // 县（最后备选）
                        ];
                        
                        // 找到第一个有效的省份信息，排除错误信息
                        const validProvinceOptions = provinceOptions.filter(option => 
                            option && 
                            option.trim() && 
                            !option.includes('失败') && 
                            !option.includes('错误') && 
                            !option.includes('Error') && 
                            !option.includes('Unknown') &&
                            option !== trans.locationError
                        );
                        
                        province = validProvinceOptions[0] || '未知省份';
                        
                        // 特殊处理：如果省份信息包含市级信息，尝试提取省级部分
                        if (province && province.includes('市') && !province.includes('自治区')) {
                            // 检查是否是直辖市
                            const municipalities = ['北京', '上海', '天津', '重庆', 'Beijing', 'Shanghai', 'Tianjin', 'Chongqing'];
                            const isMunicipality = municipalities.some(city => province.includes(city));
                            if (!isMunicipality) {
                                // 不是直辖市，尝试使用state或region
                                const fallbackProvince = validProvinceOptions.find(option => 
                                    option && !option.includes('市')) || province;
                                province = fallbackProvince;
                            }
                        }
                        
                        // 最终验证：如果省份信息仍然无效，使用智能推断
                        if (!province || province === '未知省份') {
                            // 根据城市信息推断省份
                            const cityInfo = address.city || address.municipality || address.county;
                            if (cityInfo) {
                                if (cityInfo.includes('上海') || cityInfo.includes('Shanghai')) {
                                    province = '上海市';
                                } else if (cityInfo.includes('北京') || cityInfo.includes('Beijing')) {
                                    province = '北京市';
                                } else if (cityInfo.includes('天津') || cityInfo.includes('Tianjin')) {
                                    province = '天津市';
                                } else if (cityInfo.includes('重庆') || cityInfo.includes('Chongqing')) {
                                    province = '重庆市';
                                } else {
                                    province = '位置解析中';
                                }
                            } else {
                                province = '位置解析中';
                            }
                        }
                    } else {
                        // 其他国家保持原有逻辑
                        province = address.state || address.province || address.region || 
                                 address.county || trans.locationError;
                    }
                    
                    // 提取城市信息 - 针对中国地址优化
                    let city;
                    if (address.country === translations[currentLang].china || address.country === 'China') {
                        // 对于中国地址，按照行政层级优先级处理
                        // 优先级：地级市 > 县级市 > 区县 > 镇/街道
                        const cityOptions = [
                            address.city,           // 地级市
                            address.municipality,   // 直辖市/地级市
                            address.county,         // 县/县级市
                            address.city_district,  // 市辖区
                            address.district,       // 区
                            address.town,           // 镇
                            address.village,        // 村
                            address.suburb,         // 郊区
                            address.neighbourhood   // 社区
                        ];
                        
                        // 过滤有效的城市选项，排除错误信息
                        const validCityOptions = cityOptions.filter(option => 
                            option && 
                            option.trim() && 
                            !option.includes('失败') && 
                            !option.includes('错误') && 
                            !option.includes('Error') && 
                            !option.includes('Unknown') &&
                            option !== trans.locationError
                        );
                        
                        // 找到第一个有效且不与省份重复的城市名
                        let selectedCity = null;
                        for (const option of validCityOptions) {
                            if (option !== province) {
                                // 特殊处理：如果是区级单位，尝试组合显示
                                if (option.includes('区') || option.includes('县')) {
                                    // 检查是否有上级市
                                    const parentCity = validCityOptions.find(city => 
                                        city && 
                                        !city.includes('区') && 
                                        !city.includes('县') && 
                                        city !== option && 
                                        city !== province
                                    );
                                    if (parentCity) {
                                        selectedCity = `${parentCity} ${option}`;
                                    } else {
                                        selectedCity = option;
                                    }
                                } else {
                                    selectedCity = option;
                                }
                                break;
                            }
                        }
                        
                        // 如果仍然没有找到合适的城市名，使用容错逻辑
                        if (!selectedCity) {
                            // 尝试使用任何可用的地理信息
                            selectedCity = validCityOptions[0] || 
                                         address.state_district || 
                                         address.hamlet || 
                                         '位置解析中';
                        }
                        
                        city = selectedCity;
                    } else {
                        // 其他国家也需要过滤错误信息
                        const otherCountryCityOptions = [
                            address.city, address.town, address.village,
                            address.municipality, address.suburb
                        ].filter(option => 
                            option && 
                            option.trim() && 
                            !option.includes('失败') && 
                            !option.includes('错误') && 
                            !option.includes('Error') && 
                            !option.includes('Unknown') &&
                            option !== trans.locationError
                        );
                        
                        city = otherCountryCityOptions[0] || '位置解析中';
                    }
                    
                    // 最终过滤检查，确保不显示错误信息
                    const finalCountry = (country && !country.includes('失败') && !country.includes('错误') && !country.includes('Error')) ? country : '';
                    const finalProvince = (province && !province.includes('失败') && !province.includes('错误') && !province.includes('Error')) ? province : '';
                    const finalCity = (city && !city.includes('失败') && !city.includes('错误') && !city.includes('Error')) ? city : '';
                    
                    // 分别更新显示，如果内容为空则隐藏整个元素
                    if (finalCountry) {
                        countryElement.textContent = finalCountry;
                        countryElement.parentElement.style.display = 'flex';
                    } else {
                        countryElement.parentElement.style.display = 'none';
                    }
                    
                    if (finalProvince) {
                        provinceElement.textContent = finalProvince;
                        provinceElement.parentElement.style.display = 'flex';
                    } else {
                        provinceElement.parentElement.style.display = 'none';
                    }
                    
                    if (finalCity) {
                        cityElement.textContent = finalCity;
                        cityElement.parentElement.style.display = 'flex';
                    } else {
                        cityElement.parentElement.style.display = 'none';
                    }
                    } else {
                        throw new Error('API返回数据无效');
                    }
                    
                    // 成功获取数据，退出重试循环
                    break;
                    
                } catch (error) {
                    retryCount++;
                    console.error(`获取位置信息失败 (尝试 ${retryCount}/${maxRetries + 1}):`, error.message);
                    
                    if (retryCount > maxRetries) {
                        // 所有重试都失败，使用智能容错显示
                        let fallbackCountry = '位置解析中';
                        let fallbackProvince = '';
                        let fallbackCity = '';
                        
                        // 根据错误类型提供不同的容错信息
                        if (error.name === 'AbortError') {
                            fallbackCountry = '位置解析中';
                            fallbackProvince = '';
                            fallbackCity = '';
                        } else if (error.message.includes('429')) {
                            fallbackCountry = '位置解析中';
                            fallbackProvince = '';
                            fallbackCity = '';
                        } else if (error.message.includes('API')) {
                            fallbackCountry = '位置解析中';
                            fallbackProvince = '';
                            fallbackCity = '';
                        }
                        
                        // 尝试从坐标推断大致位置（中国境内坐标范围）
                        if (lat >= 18 && lat <= 54 && lng >= 73 && lng <= 135) {
                            fallbackCountry = '中国';
                            // 根据坐标大致判断区域
                            if (lat >= 39 && lat <= 41 && lng >= 115 && lng <= 118) {
                                fallbackProvince = '北京市';
                                fallbackCity = '北京';
                            } else if (lat >= 30 && lat <= 32 && lng >= 120 && lng <= 122) {
                                fallbackProvince = '上海市';
                                fallbackCity = '上海';
                            } else if (lat >= 22 && lat <= 24 && lng >= 113 && lng <= 115) {
                                fallbackProvince = '广东省';
                                fallbackCity = '广州';
                            } else {
                                fallbackProvince = '';
                                fallbackCity = '';
                            }
                        }
                        
                        // 错误处理时也要根据内容决定是否显示
                        if (fallbackCountry) {
                            countryElement.textContent = fallbackCountry;
                            countryElement.parentElement.style.display = 'flex';
                        } else {
                            countryElement.parentElement.style.display = 'none';
                        }
                        
                        if (fallbackProvince) {
                            provinceElement.textContent = fallbackProvince;
                            provinceElement.parentElement.style.display = 'flex';
                        } else {
                            provinceElement.parentElement.style.display = 'none';
                        }
                        
                        if (fallbackCity) {
                            cityElement.textContent = fallbackCity;
                            cityElement.parentElement.style.display = 'flex';
                        } else {
                            cityElement.parentElement.style.display = 'none';
                        }
                        
                        // 显示用户友好的提示信息
                        console.warn('地理位置解析失败，已启用容错显示模式');
                        return;
                    }
                    
                    // 等待后重试（指数退避）
                    const delay = Math.pow(2, retryCount - 1) * 1000; // 1s, 2s, 4s...
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }
        

    </script>
    
    <!-- Apple风格合规信息 -->
    <footer class="apple-footer">
        <div class="container">
            <div class="footer-glass-card">
                <div class="footer-content">
                    <div class="security-section">
                        <div class="security-badge">
                            <div class="shield-glow">🛡️</div>
                            <span data-translate="enterpriseSecurity">企业级安全认证</span>
                        </div>
                    </div>
                    <div class="links-section">
                        <a href="#" class="footer-link" data-translate="privacyPolicy">隐私政策</a>
                        <a href="#" class="footer-link" data-translate="termsOfService">服务条款</a>
                        <a href="#" class="footer-link" data-translate="securityInfo">安全说明</a>
                    </div>
                    <div class="copyright-section">
                        <span class="copyright-text" data-translate="copyrightText">© 2024 GPX转TCX专业版</span>
                        <span class="security-text" data-translate="dataSecurityGuarantee">数据安全保障</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    
    <style>
    .apple-footer {
        position: relative;
        margin: 0;
        padding: var(--space-2xl) 0;
        background: linear-gradient(180deg, 
            rgba(28, 28, 30, 0) 0%,
            rgba(28, 28, 30, 0.1) 40%,
            rgba(28, 28, 30, 0.4) 80%,
            rgba(28, 28, 30, 0.6) 100%);
        backdrop-filter: blur(30px) saturate(120%);
        border-top: none;
    }
    
    .apple-footer::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, 
            transparent 0%,
            rgba(255, 255, 255, 0.03) 30%,
            rgba(255, 255, 255, 0.06) 50%,
            rgba(255, 255, 255, 0.03) 70%,
            transparent 100%);
    }
    
    .footer-glass-card {
        background: rgba(255, 255, 255, 0.02);
        backdrop-filter: blur(25px) saturate(110%);
        border: 1px solid rgba(255, 255, 255, 0.05);
        border-radius: var(--radius-xl);
        padding: var(--space-md) var(--space-lg);
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        transition: var(--transition-smooth);
    }
    
    .footer-glass-card:hover {
        transform: translateY(-1px);
        background: rgba(255, 255, 255, 0.04);
        border-color: rgba(255, 255, 255, 0.08);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    }
    
    .footer-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: var(--space-lg);
    }
    
    .security-section {
        display: flex;
        align-items: center;
    }
    
    .security-badge {
        display: flex;
        align-items: center;
        gap: var(--space-sm);
        background: linear-gradient(135deg, rgba(0, 208, 132, 0.1), rgba(0, 245, 160, 0.05));
        color: rgba(255, 255, 255, 0.7);
        padding: var(--space-sm) var(--space-lg);
        border-radius: var(--radius-xl);
        border: 1px solid rgba(0, 208, 132, 0.2);
        font-size: 14px;
        font-weight: 500;
        font-family: var(--font-sans);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        transition: var(--transition-smooth);
    }
    
    .security-badge:hover {
        background: linear-gradient(135deg, rgba(0, 208, 132, 0.15), rgba(0, 245, 160, 0.08));
        border-color: rgba(0, 208, 132, 0.3);
        color: rgba(255, 255, 255, 0.85);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    
    .shield-glow {
        font-size: 16px;
        filter: drop-shadow(0 0 4px rgba(0, 245, 160, 0.3));
        opacity: 0.8;
    }
    
    .links-section {
        display: flex;
        gap: var(--space-xl);
    }
    
    .footer-link {
        color: rgba(255, 255, 255, 0.4);
        text-decoration: none;
        font-size: 14px;
        font-weight: 400;
        font-family: var(--font-sans);
        padding: var(--space-xs) var(--space-sm);
        border-radius: var(--radius-sm);
        transition: var(--transition-smooth);
        position: relative;
    }
    
    .footer-link::before {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 50%;
        width: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, rgba(0, 208, 132, 0.3), transparent);
        border-radius: 1px;
        transition: var(--transition-smooth);
        transform: translateX(-50%);
    }
    
    .footer-link:hover {
        color: rgba(255, 255, 255, 0.6);
        background: rgba(0, 208, 132, 0.05);
    }
    
    .footer-link:hover::before {
        width: 100%;
    }
    
    .copyright-section {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        gap: var(--space-xs);
    }
    
    .copyright-text {
        color: var(--text-tertiary);
        font-size: 13px;
        font-weight: 500;
        font-family: var(--font-sans);
    }
    
    .security-text {
        color: var(--text-accent);
        font-size: 12px;
        font-weight: 600;
        font-family: var(--font-sans);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    @media (max-width: 768px) {
        .apple-footer {
            margin-top: var(--space-2xl);
            padding: var(--space-lg) 0;
        }
        
        .footer-glass-card {
            padding: var(--space-lg);
            border-radius: var(--radius-lg);
        }
        
        .footer-content {
            flex-direction: column;
            text-align: center;
            gap: var(--space-lg);
        }
        
        .links-section {
            gap: var(--space-lg);
        }
        
        .copyright-section {
            align-items: center;
        }
        
        .security-badge {
            font-size: 13px;
            padding: var(--space-xs) var(--space-md);
        }
    }
    </style>
</body>
</html>
